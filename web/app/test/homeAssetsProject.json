{"name":"Home Costs","fileType":"visicomp workspace","jsLinks":["../../lib/chart/Chart.min.js","../../app/test/SimpleChartControl.js"],"cssLinks":[],"data":{"generalInfo":{"name":"generalInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":252,"height":148,"x":25,"y":4},"windowState":0,"data":{"initialSavings":200000,"monthlyAllowance":3000,"savingsReturnPercent":4,"inflationPercent":3}},"CALCULATION_DURATION_YEARS":{"name":"CALCULATION_DURATION_YEARS","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":259,"height":58,"x":298,"y":6},"windowState":0,"data":50},"homeScenario":{"name":"homeScenario","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":358,"height":213,"x":24,"y":170},"windowState":0,"data":{"homeCost":500000,"downpaymentPercent":20,"lengthYears":30,"ratePercent":4,"homeApprciationPercent":4,"propertyTaxPercent":1.3,"taxHomeValueGrowthPercent":1,"maintancePercent":1.3,"marginalTaxRatePercent":35}},"rentalScenario":{"name":"rentalScenario","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":357,"height":111,"x":19,"y":420},"windowState":0,"data":{"rentDollars":1500,"rentGrowthPercent":4}},"assetChart":{"name":"assetChart","type":"visicomp.example.SimpleChartControl","windowCoords":{"width":1063,"height":535,"x":282,"y":88},"windowState":0,"functionBody":"datasets = [];\nloadHomeDataSets(datasets);\nloadRentalDataSets(datasets);\nloadHomelessDataSets(datasets);\n\nvar data = {};\ndata.labels = calculations.chartInfo.getLabels();\ndata.datasets = datasets;\n\nresourceProcessor.setChartSize(1000,500);\nresourceProcessor.setData(data,calculations.chartInfo.chartOptions);","supplementalCode":"var LOAN_COLOR = \"rgba(255,0,0,.5)\";\nvar HOME_COLOR = \"rgba(255,0,0,.75)\";\nvar HOME_ASSETS_COLOR = \"rgba(255,0,0,1)\";\nvar RENTAL_ASSETS_COLOR = \"rgba(0,0,255,1)\";\nvar HOMELESS_ASSETS_COLOR = \"rgba(0,255,0,1)\";\n\nfunction loadHomeDataSets(datasets) {\n    var loanValues = [];\n    var homeValues = [];\n    var homeAssetValues = [];\n    \n    for(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n        loanValues[i] = -calculations.own.loanInfo[i].principal;\n        homeValues[i] = calculations.own.homeValueInfo[i].homeValue + loanValues[i];\n        homeAssetValues[i] = calculations.own.savingsInfo[i] + homeValues[i];\n    }\n    \n    datasets.push(calculations.chartInfo.getDataset(loanValues,LOAN_COLOR));\n    datasets.push(calculations.chartInfo.getDataset(homeValues,HOME_COLOR));\n    datasets.push(calculations.chartInfo.getDataset(homeAssetValues,HOME_ASSETS_COLOR));\n    \n}\n\nfunction loadRentalDataSets(datasets) {\n    datasets.push(calculations.chartInfo.getDataset(calculations.rent.savingsInfo,RENTAL_ASSETS_COLOR));\n}\n\nfunction loadHomelessDataSets(datasets) {\n    datasets.push(calculations.chartInfo.getDataset(calculations.homeless.savings,HOMELESS_ASSETS_COLOR));\n}"},"costsChart":{"name":"costsChart","type":"visicomp.example.SimpleChartControl","windowCoords":{"width":1126,"height":524,"x":240,"y":501},"windowState":0,"functionBody":"datasets = [];\nloadHomeDataSets(datasets);\nloadRentalDataSets(datasets);\nloadHomelessDataSets(datasets);\n\nvar data = {};\ndata.labels = calculations.chartInfo.getLabels();\ndata.datasets = datasets;\n\nresourceProcessor.setChartSize(1000,500);\nresourceProcessor.setData(data,calculations.chartInfo.chartOptions);","supplementalCode":"var HOME_CREDITS_COLOR = \"rgba(255,0,0,.25)\";\nvar HOME_PROPERTY_TAX_PLUS_COLOR = \"rgba(255,0,0,.5)\";\nvar HOME_MAINTAINANCE_PLUS_COLOR = \"rgba(255,0,0,.75)\";\nvar HOME_COSTS_COLOR = \"rgba(255,0,0,1)\";\nvar RENTAL_COSTS_COLOR = \"rgba(0,0,255,1)\";\nvar HOMELESS_COSTS_COLOR = \"rgba(0,255,0,1)\";\n\nfunction loadHomeDataSets(datasets) {\n    var creditsValues = [];\n    var propTaxValues = [];\n    var maintanenceValues = [];\n    var homeCostsValues = [];\n    \n    for(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n        creditsValues[i] = -calculations.own.homeCostsInfo[i].taxCredit;\n        propTaxValues[i] = calculations.own.homeCostsInfo[i].propertyTax + creditsValues[i];\n        maintanenceValues[i] = calculations.own.homeCostsInfo[i].maintanence + propTaxValues[i];\n        homeCostsValues[i] = calculations.own.loanInfo[i].payment + maintanenceValues[i];\n    }\n    \n    datasets.push(calculations.chartInfo.getDataset(creditsValues,HOME_CREDITS_COLOR));\n    datasets.push(calculations.chartInfo.getDataset(propTaxValues,HOME_PROPERTY_TAX_PLUS_COLOR));\n    datasets.push(calculations.chartInfo.getDataset(maintanenceValues,HOME_MAINTAINANCE_PLUS_COLOR));\n    datasets.push(calculations.chartInfo.getDataset(homeCostsValues,HOME_COSTS_COLOR));\n    \n}\n\nfunction loadRentalDataSets(datasets) {\n    datasets.push(calculations.chartInfo.getDataset(calculations.rent.rentInfo,RENTAL_COSTS_COLOR));\n}\n\nfunction loadHomelessDataSets(datasets) {\n    datasets.push(calculations.chartInfo.getDataset(calculations.homeless.costs,HOMELESS_COSTS_COLOR));\n}"},"calculations":{"name":"calculations","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":1222,"height":940,"x":815,"y":19},"windowState":-1,"children":{"own":{"name":"own","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":858,"height":634,"x":34,"y":28},"windowState":-1,"children":{"mortagePayment":{"name":"mortagePayment","type":"visicomp.app.visiui.FunctionControl","windowCoords":{"width":200,"height":200,"x":539,"y":529},"windowState":-1,"argList":["loanAmount","lengthYears","ratePercent"],"functionBody":"var monthlyInterestRate = ratePercent/calculations.MONTHS_PER_YEAR/100;\nvar numberMonths = lengthYears * calculations.MONTHS_PER_YEAR;\n\nvar compoundFactor = Math.pow(1 + monthlyInterestRate,numberMonths);\n\nvar payment = loanAmount * \n    (monthlyInterestRate*compoundFactor) / \n    (compoundFactor - 1);\n    \nreturn payment;","supplementalCode":""},"payment":{"name":"payment","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":190,"height":60,"x":409,"y":21},"windowState":0,"functionBody":"var value;\nvar loanAmount = homeScenario.homeCost * (1 - homeScenario.downpaymentPercent/100);\n\nvalue = mortagePayment(loanAmount,\n    homeScenario.lengthYears,homeScenario.ratePercent);\nreturn value;\n\n","supplementalCode":""},"loanAmount":{"name":"loanAmount","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":132,"height":59,"x":229,"y":19},"windowState":0,"functionBody":"var value;\nvalue = homeScenario.homeCost - downpayment;\nreturn value;\n\n","supplementalCode":""},"downpayment":{"name":"downpayment","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":144,"height":68,"x":35,"y":17},"windowState":0,"functionBody":"var value;\nvalue = homeScenario.homeCost * homeScenario.downpaymentPercent/100;\nreturn value;\n\n","supplementalCode":""},"loanInfo":{"name":"loanInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":387,"height":171,"x":32,"y":111},"windowState":0,"functionBody":"var value;\nvar initialPrincipal = loanAmount;\nvar monthlyInterestRate = homeScenario.ratePercent/calculations.MONTHS_PER_YEAR/100;\n\nvalue = [];\nvar entry;\n\n\n//initial\nentry = {};\nentry.principal = initialPrincipal;\nentry.payment = 0;\nentry.interest = 0;\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    \n    entry = {};\n    entry.interest = prevEntry.principal * monthlyInterestRate;\n    var newPrincipalBeforePayment = prevEntry.principal + entry.interest;\n    \n    entry.payment = (newPrincipalBeforePayment > payment) ? payment : newPrincipalBeforePayment;\n    entry.principal = newPrincipalBeforePayment - entry.payment;\n\n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":""},"homeValueInfo":{"name":"homeValueInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":383,"height":167,"x":31,"y":317},"windowState":0,"functionBody":"var value;\nvar initialHomeValue = homeScenario.homeCost;\nvar homeValueGrowthFactor = (1 + homeScenario.homeApprciationPercent/calculations.MONTHS_PER_YEAR/100);\nvar taxHomeValueGrowthFactor = (1 + homeScenario.taxHomeValueGrowthPercent/calculations.MONTHS_PER_YEAR/100);\n\n\nvalue = [];\nvar entry;\n\n//initial homeAssets\nentry = {};\nentry.homeValue = initialHomeValue;\nentry.taxHomeValue = initialHomeValue;\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n    entry = {};\n\n    entry.homeValue = prevEntry.homeValue * homeValueGrowthFactor;\n    entry.taxHomeValue = prevEntry.taxHomeValue * taxHomeValueGrowthFactor;\n    \n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":""},"savingsInfo":{"name":"savingsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":343,"height":174,"x":25,"y":509},"windowState":0,"functionBody":"var value;\nvar initialSavings = generalInfo.initialSavings - downpayment;\nvar savingsGrowthFactor = (1 + generalInfo.savingsReturnPercent/calculations.MONTHS_PER_YEAR/100);\n\nvalue = [];\n\nvalue[0] = initialSavings;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * savingsGrowthFactor + calculations.allowanceInfo[i] - homeCostsInfo[i].totalWithMortgage;\n}\nreturn value;\n\n","supplementalCode":""},"homeCostsInfo":{"name":"homeCostsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":333,"height":182,"x":482,"y":107},"windowState":0,"functionBody":"var value;\nvar monthlyPropertyTaxPercent = homeScenario.propertyTaxPercent/calculations.MONTHS_PER_YEAR/100;\nvar monthlyMaintanenceFactor = homeScenario.maintancePercent/calculations.MONTHS_PER_YEAR/100;\nvar marginalTaxRate = homeScenario.marginalTaxRatePercent/100;\n\nvalue = [];\nvar entry;\n\n//initial homeAssets\nentry = {};\nentry.maintanence = 0;\nentry.taxCredit = 0;\nentry.propertyTax = 0;\nentry.totalWithMortgage = getTotalCosts(entry,loanInfo[0]);\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    entry = {};\n    loanInfoEntry = loanInfo[i];\n    homeValueEntry = homeValueInfo[i];\n\n    entry.propertyTax = homeValueEntry.taxHomeValue * monthlyPropertyTaxPercent;\n    entry.maintanence = homeValueEntry.homeValue * monthlyMaintanenceFactor;\n    entry.taxCredit = (loanInfoEntry.interest + entry.propertyTax) * marginalTaxRate; \n    entry.totalWithMortgage = getTotalCosts(entry,loanInfoEntry);\n    \n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":"function getTotalCosts(costsEntry,loanEntry) {\n    return costsEntry.maintanence + costsEntry.propertyTax +\n        loanEntry.payment - costsEntry.taxCredit;\n    \n}"},"totalAssets":{"name":"totalAssets","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":329,"height":154,"x":476,"y":324},"windowState":0,"functionBody":"var value;\nvalue = [];\nfor(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = savingsInfo[i] + homeValueInfo[i].homeValue - loanInfo[i].principal;\n}\nreturn value;\n\n","supplementalCode":""}}},"rent":{"name":"rent","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":809,"height":597,"x":33,"y":83},"windowState":-1,"children":{"savingsInfo":{"name":"savingsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":285,"height":223,"x":41,"y":196},"windowState":0,"functionBody":"var value;\nvar initialSavings = generalInfo.initialSavings;\nvar savingsGrowthFactor = (1 + generalInfo.savingsReturnPercent/calculations.MONTHS_PER_YEAR/100);\n\nvalue = [];\nvalue[0] = initialSavings;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * savingsGrowthFactor + calculations.allowanceInfo[i] - rentInfo[i];\n}\nreturn value;\n\n","supplementalCode":""},"rentInfo":{"name":"rentInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":298,"height":137,"x":41,"y":26},"windowState":0,"functionBody":"var value;\nvar initialRent = rentalScenario.rentDollars;\nvar rentGrowthFactor = (1 + rentalScenario.rentGrowthPercent/calculations.MONTHS_PER_YEAR/100);\n\nvalue = [];\nvalue[0] = initialRent;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * rentGrowthFactor;\n}\nreturn value;\n\n","supplementalCode":""}}},"MONTHS_PER_YEAR":{"name":"MONTHS_PER_YEAR","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":205,"height":62,"x":704,"y":64},"windowState":-1,"data":12},"NUMBER_MONTHS":{"name":"NUMBER_MONTHS","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":192,"height":60,"x":704,"y":16},"windowState":-1,"functionBody":"var value;\nvalue = CALCULATION_DURATION_YEARS * calculations.MONTHS_PER_YEAR;\nreturn value;\n\n","supplementalCode":""},"allowanceInfo":{"name":"allowanceInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":265,"height":148,"x":307,"y":24},"windowState":0,"functionBody":"var value;\nvar initialAllowance = generalInfo.monthlyAllowance;\nvar allowanceGrowthFactor = (1 + generalInfo.inflationPercent/calculations.MONTHS_PER_YEAR/100);\n\nvalue = [];\n\nvalue[0] = initialAllowance;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * allowanceGrowthFactor;\n}\nreturn value;\n\n","supplementalCode":""},"chartInfo":{"name":"chartInfo","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":892,"height":500,"x":31,"y":257},"windowState":-1,"children":{"chartOptions":{"name":"chartOptions","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":200,"height":200,"x":16,"y":29},"windowState":0,"data":{"scaleShowGridLines":true,"scaleGridLineColor":"rgba(0,0,0,.05)","scaleGridLineWidth":1,"scaleShowHorizontalLines":true,"scaleShowVerticalLines":false,"bezierCurve":false,"pointDot":false,"pointHitDetectionRadius":20,"datasetStroke":true,"datasetStrokeWidth":2,"datasetFill":false}},"getLabels":{"name":"getLabels","type":"visicomp.app.visiui.FunctionControl","windowCoords":{"width":298,"height":275,"x":528,"y":32},"windowState":0,"argList":[],"functionBody":"//construct the labels\nvar labels = [];\nfor(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n    if((i % 12) === 0) {\n        labels[i] = Math.round(i / 12);\n    }\n    else {\n        labels[i] = \"\";\n    }\n}\n\nreturn labels;","supplementalCode":""},"getDataset":{"name":"getDataset","type":"visicomp.app.visiui.FunctionControl","windowCoords":{"width":200,"height":200,"x":269,"y":91},"windowState":0,"argList":["valueArray","color"],"functionBody":"var dataSet = {};\ndataSet.data = valueArray;\ndataSet.strokeColor = color;\n\nreturn dataSet;","supplementalCode":""}}},"homeless":{"name":"homeless","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":690,"height":378,"x":33,"y":139},"windowState":-1,"children":{"costs":{"name":"costs","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":200,"height":200,"x":38,"y":19},"windowState":0,"functionBody":"var value;\nvalue = [];\nfor(var i = 0; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = 0;\n}\nreturn value;\n\n","supplementalCode":""},"savings":{"name":"savings","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":200,"height":200,"x":319,"y":27},"windowState":0,"functionBody":"var value;\nvar initialSavings = generalInfo.initialSavings;\nvar savingsGrowthFactor = (1 + generalInfo.savingsReturnPercent/calculations.MONTHS_PER_YEAR/100);\n\nvalue = [];\nvalue[0] = initialSavings;\nfor(var i = 1; i < calculations.NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * savingsGrowthFactor + calculations.allowanceInfo[i] - costs[i];\n}\nreturn value;\n\n","supplementalCode":""}}}}}}}