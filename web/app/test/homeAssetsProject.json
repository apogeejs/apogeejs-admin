{"name":"Home Costs","fileType":"visicomp workspace","jsLinks":[],"cssLinks":[],"data":{"homeScenario":{"name":"homeScenario","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":358,"height":213,"x":21,"y":173},"windowState":0,"data":{"homeCost":500000,"downpaymentPercent":20,"lengthYears":30,"ratePercent":4,"homeApprciationPercent":4,"propertyTaxPercent":1.3,"taxHomeValueGrowthPercent":1,"maintancePercent":1.3,"marginalTaxRatePercent":35}},"rentalScenario":{"name":"rentalScenario","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":357,"height":111,"x":19,"y":420},"windowState":0,"data":{"rentDollars":1500,"rentGrowthPercent":4}},"MONTHS_PER_YEAR":{"name":"MONTHS_PER_YEAR","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":205,"height":62,"x":1160,"y":187},"windowState":-1,"data":12},"own":{"name":"own","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":858,"height":634,"x":621,"y":10},"windowState":-1,"children":{"mortagePayment":{"name":"mortagePayment","type":"visicomp.app.visiui.FunctionControl","windowCoords":{"width":200,"height":200,"x":539,"y":529},"windowState":-1,"argList":["loanAmount","lengthYears","ratePercent"],"functionBody":"var MONTHS_PER_YEAR = 12;\nvar monthlyInterestRate = ratePercent/MONTHS_PER_YEAR/100;\nvar numberMonths = lengthYears * MONTHS_PER_YEAR;\n\nvar compoundFactor = Math.pow(1 + monthlyInterestRate,numberMonths);\n\nvar payment = loanAmount * \n    (monthlyInterestRate*compoundFactor) / \n    (compoundFactor - 1);\n    \nreturn payment;","supplementalCode":""},"payment":{"name":"payment","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":190,"height":60,"x":409,"y":21},"windowState":0,"functionBody":"var value;\nvar loanAmount = homeScenario.homeCost * (1 - homeScenario.downpaymentPercent/100);\n\nvalue = mortagePayment(loanAmount,\n    homeScenario.lengthYears,homeScenario.ratePercent);\nreturn value;\n\n","supplementalCode":""},"loanAmount":{"name":"loanAmount","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":132,"height":59,"x":229,"y":19},"windowState":0,"functionBody":"var value;\nvalue = homeScenario.homeCost - downpayment;\nreturn value;\n\n","supplementalCode":""},"downpayment":{"name":"downpayment","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":144,"height":68,"x":35,"y":17},"windowState":0,"functionBody":"var value;\nvalue = homeScenario.homeCost * homeScenario.downpaymentPercent/100;\nreturn value;\n\n","supplementalCode":""},"loanInfo":{"name":"loanInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":387,"height":171,"x":32,"y":111},"windowState":0,"functionBody":"var value;\nvar initialPrincipal = loanAmount;\nvar monthlyInterestRate = homeScenario.ratePercent/MONTHS_PER_YEAR/100;\n\nvalue = [];\nvar entry;\n\n\n//initial\nentry = {};\nentry.principal = initialPrincipal;\nentry.payment = 0;\nentry.interest = 0;\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    \n    entry = {};\n    entry.interest = prevEntry.principal * monthlyInterestRate;\n    var newPrincipalBeforePayment = prevEntry.principal + entry.interest;\n    \n    entry.payment = (newPrincipalBeforePayment > payment) ? payment : newPrincipalBeforePayment;\n    entry.principal = newPrincipalBeforePayment - entry.payment;\n\n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":""},"homeValueInfo":{"name":"homeValueInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":383,"height":167,"x":31,"y":317},"windowState":0,"functionBody":"var value;\nvar initialHomeValue = homeScenario.homeCost;\nvar homeValueGrowthFactor = (1 + homeScenario.homeApprciationPercent/MONTHS_PER_YEAR/100);\nvar taxHomeValueGrowthFactor = (1 + homeScenario.taxHomeValueGrowthPercent/MONTHS_PER_YEAR/100);\n\n\nvalue = [];\nvar entry;\n\n//initial homeAssets\nentry = {};\nentry.homeValue = initialHomeValue;\nentry.taxHomeValue = initialHomeValue;\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 0; i < NUMBER_MONTHS; i++) {\n    entry = {};\n\n    entry.homeValue = prevEntry.homeValue * homeValueGrowthFactor;\n    entry.taxHomeValue = prevEntry.taxHomeValue * taxHomeValueGrowthFactor;\n    \n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":""},"savingsInfo":{"name":"savingsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":343,"height":174,"x":25,"y":509},"windowState":0,"functionBody":"var value;\nvar initialSavings = generalInfo.initialSavings - downpayment;\nvar savingsGrowthFactor = (1 + generalInfo.savingsReturnPercent/MONTHS_PER_YEAR/100);\n\nvalue = [];\n\nvalue[0] = initialSavings;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * savingsGrowthFactor + allowanceInfo[i] - homeCostsInfo[i].totalWithMortgage;\n}\nreturn value;\n\n","supplementalCode":""},"homeCostsInfo":{"name":"homeCostsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":333,"height":182,"x":473,"y":113},"windowState":0,"functionBody":"var value;\nvar monthlyPropertyTaxPercent = homeScenario.propertyTaxPercent/MONTHS_PER_YEAR/100;\nvar monthlyMaintanenceFactor = homeScenario.maintancePercent/MONTHS_PER_YEAR/100;\nvar marginalTaxRate = homeScenario.marginalTaxRatePercent/100;\n\nvalue = [];\nvar entry;\n\n//initial homeAssets\nentry = {};\nentry.maintanence = 0;\nentry.taxCredit = 0;\nentry.propertyTax = 0;\nentry.totalWithMortgage = getTotalCosts(entry,loanInfo[0]);\nvalue[0] = entry;\n\n//evolution\nvar prevEntry = entry;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    entry = {};\n    loanInfoEntry = loanInfo[i];\n    homeValueEntry = homeValueInfo[i];\n\n    entry.propertyTax = homeValueEntry.taxHomeValue * monthlyPropertyTaxPercent;\n    entry.maintanence = homeValueEntry.homeValue * monthlyMaintanenceFactor;\n    entry.taxCredit = (loanInfoEntry.interest + entry.propertyTax) * marginalTaxRate; \n    entry.totalWithMortgage = getTotalCosts(entry,loanInfoEntry);\n    \n    value.push(entry);\n    prevEntry = entry;\n}\nreturn value;\n\n","supplementalCode":"function getTotalCosts(costsEntry,loanEntry) {\n    return costsEntry.maintanence + costsEntry.propertyTax +\n        loanEntry.payment - costsEntry.taxCredit;\n    \n}"},"totalAssets":{"name":"totalAssets","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":329,"height":154,"x":476,"y":324},"windowState":0,"functionBody":"var value;\nvalue = [];\nfor(var i = 0; i < NUMBER_MONTHS; i++) {\n    value[i] = savingsInfo[i] + homeValueInfo[i].homeValue - loanInfo[i].principal;\n}\nreturn value;\n\n","supplementalCode":""}}},"CALCULATION_DURATION_YEARS":{"name":"CALCULATION_DURATION_YEARS","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":264,"height":69,"x":299,"y":5},"windowState":0,"data":50},"NUMBER_MONTHS":{"name":"NUMBER_MONTHS","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":192,"height":60,"x":1161,"y":238},"windowState":-1,"functionBody":"var value;\nvalue = CALCULATION_DURATION_YEARS * MONTHS_PER_YEAR;\nreturn value;\n\n","supplementalCode":""},"rent":{"name":"rent","type":"visicomp.app.visiui.FolderControl","windowCoords":{"width":809,"height":597,"x":620,"y":55},"windowState":-1,"children":{"totalAssets":{"name":"totalAssets","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":369,"height":200,"x":389,"y":248},"windowState":0,"functionBody":"var value;\nvalue = savingsInfo;\nreturn value;\n\n","supplementalCode":""},"savingsInfo":{"name":"savingsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":285,"height":223,"x":40,"y":195},"windowState":0,"functionBody":"var value;\nvar initialSavings = generalInfo.initialSavings;\nvar savingsGrowthFactor = (1 + generalInfo.savingsReturnPercent/MONTHS_PER_YEAR/100);\n\nvalue = [];\nvalue[0] = initialSavings;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * savingsGrowthFactor + allowanceInfo[i] - homeCostsInfo[i];\n}\nreturn value;\n\n","supplementalCode":""},"homeCostsInfo":{"name":"homeCostsInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":375,"height":200,"x":389,"y":20},"windowState":0,"functionBody":"var value;\nvalue = rentInfo;\nreturn value;\n\n","supplementalCode":""},"rentInfo":{"name":"rentInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":298,"height":137,"x":41,"y":25},"windowState":0,"functionBody":"var value;\nvar initialRent = rentalScenario.rentDollars;\nvar rentGrowthFactor = (1 + rentalScenario.rentGrowthPercent/MONTHS_PER_YEAR/100);\n\nvalue = [];\nvalue[0] = initialRent;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * rentGrowthFactor;\n}\nreturn value;\n\n","supplementalCode":""}}},"allowanceInfo":{"name":"allowanceInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":265,"height":148,"x":1157,"y":17},"windowState":0,"functionBody":"var value;\nvar initialAllowance = generalInfo.monthlyAllowance;\nvar allowanceGrowthFactor = (1 + generalInfo.inflationPercent/MONTHS_PER_YEAR/100);\n\nvalue = [];\n\nvalue[0] = initialAllowance;\nfor(var i = 1; i < NUMBER_MONTHS; i++) {\n    value[i] = value[i-1] * allowanceGrowthFactor;\n}\nreturn value;\n\n","supplementalCode":""},"generalInfo":{"name":"generalInfo","type":"visicomp.app.visiui.TableControl","windowCoords":{"width":252,"height":148,"x":25,"y":4},"windowState":0,"data":{"initialSavings":200000,"monthlyAllowance":3000,"savingsReturnPercent":4,"inflationPercent":3}}}}