{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":-1,"lists":{"es module":{"treeState":0},"js link":{"treeState":0},"css link":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"SudokuHelper","children":{"main":{"name":"main","type":"apogee.Folder","children":{"gameBoard":{"name":"gameBoard","type":"apogee.JsonMember","updateData":{"data":[["5","3","","","7","","","",""],["6","","","1","9","5","","",""],["","9","8","","","","","6",""],["8","","","","6","","","","3"],["4","","","8","","3","","","1"],["7","","","","2","","","","6"],["","6","","","","","2","8","4"],["","","","4","1","9","","3","5"],["","","","","8","","","7","9"]]}},"refGameBoard":{"name":"refGameBoard","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return [\n\t[\n\t\t\"5\",\n\t\t\"3\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"7\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\"\n\t],\n\t[\n\t\t\"6\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"1\",\n\t\t\"9\",\n\t\t\"5\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\"\n\t],\n\t[\n\t\t\"\",\n\t\t\"9\",\n\t\t\"8\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"6\",\n\t\t\"\"\n\t],\n\t[\n\t\t\"8\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"6\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"3\"\n\t],\n\t[\n\t\t\"4\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"8\",\n\t\t\"\",\n\t\t\"3\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"1\"\n\t],\n\t[\n\t\t\"7\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"2\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"6\"\n\t],\n\t[\n\t\t\"\",\n\t\t\"6\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"2\",\n\t\t\"8\",\n\t\t\"\"\n\t],\n\t[\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"4\",\n\t\t\"1\",\n\t\t\"9\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"5\"\n\t],\n\t[\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"8\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"7\",\n\t\t\"9\"\n\t]\n];","supplementalCode":""}},"boardAnalysis":{"name":"boardAnalysis","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"console.log(\"Board analysis done!\");\n\nlet squareResults = [];\n\nfor(let ir = 0; ir < 9; ir++) {\n    squareResults[ir] = [];\n    for(let ic = 0; ic < 9; ic++) {\n        let squareSelection = gameBoardData[ir][ic];\n        let squareResult = {};\n        if(squareSelection == \"\") {\n            //if there is no selection, find the allowed values\n            squareResult.options = getAllowedSquareValues(ir,ic,gameBoardData);\n        }\n        else {\n            //otherwise, show the current selection\n            squareResult.selection = squareSelection;\n        }\n        \n        squareResults[ir][ic] = squareResult;\n    }\n}\n\nreturn squareResults;","supplementalCode":""}},"gameBoardData":{"name":"gameBoardData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let data = [];\n\nfor(let ir = 0; ir < 9; ir++) {\n    data[ir] = [];\n    for(let ic = 0; ic < 9; ic++) {\n        let stringValue = gameBoard[ir][ic];\n        if(ALLOWED_SELECTIONS.indexOf(stringValue) > -1) {\n            data[ir][ic] = stringValue;\n        }\n        else {\n            throw new Error(\"Invalid value in square row = \" + (ir+1) + \", column = \" + (ic + 1) + \" (Note - sqaure value should be a string)\");\n        }\n    }\n}\n\nreturn data;","supplementalCode":""}},"ALLOWED_SELECTIONS":{"name":"ALLOWED_SELECTIONS","type":"apogee.JsonMember","updateData":{"data":["","1","2","3","4","5","6","7","8","9"]}},"getAllowedSquareValues":{"name":"getAllowedSquareValues","type":"apogee.FolderFunction","updateData":{"argList":["rowIndex","columnIndex","gameBoardData"],"returnValue":"allowedSquareValues"},"children":{"body":{"name":"body","type":"apogee.Folder","children":{"rowIndex":{"name":"rowIndex","type":"apogee.JsonMember","updateData":{"data":3}},"columnIndex":{"name":"columnIndex","type":"apogee.JsonMember","updateData":{"data":2}},"gameBoardData":{"name":"gameBoardData","type":"apogee.JsonMember","updateData":{"data":[["","","7","","1","","","4","2"],["","","","","7","","9","",""],["6","1","9","","","","","",""],["","","5","4","2","","","","7"],["","4","","","","","","5",""],["2","","","","9","5","1","",""],["","","","","","","7","6","1"],["","","1","","3","","","",""],["7","9","","","4","","8","",""]]}},"sectionNumber":{"name":"sectionNumber","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return 3 * Math.floor(rowIndex / 3) + Math.floor(columnIndex / 3);","supplementalCode":""}},"sectionIndex":{"name":"sectionIndex","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return 3 * (rowIndex % 3) + (columnIndex % 3);","supplementalCode":""}},"rowSelections":{"name":"rowSelections","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let row = gameBoardData[rowIndex];\nlet rowSelections = [];\n\nrow.forEach( (value,index) => {\n    if((index != columnIndex)&&(value !== \"\")) rowSelections.push(value);\n});\n\nreturn rowSelections;","supplementalCode":""}},"columnSelections":{"name":"columnSelections","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let columnSelections = [];\n\ngameBoardData.forEach( (row,index) => {\n    let value = row[columnIndex];\n    if((index != rowIndex)&&(value != \"\")) columnSelections.push(value)\n});\n\nreturn columnSelections;","supplementalCode":""}},"sectionSelections":{"name":"sectionSelections","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let sectionSelections = [];\nlet iFirstRow = Math.floor(sectionNumber / 3) * 3;\nlet iFirstCol = (sectionNumber % 3) * 3;\n\nfor(let iSecRow = 0; iSecRow < 3; iSecRow++) {\n    for(let iSecCol = 0; iSecCol < 3; iSecCol++) {\n        \n        let localSectionIndex = iSecRow*3 + iSecCol;\n        if(localSectionIndex == sectionIndex) continue;\n        \n        let value = gameBoardData[iFirstRow + iSecRow][iFirstCol + iSecCol];\n        if(value != \"\") sectionSelections.push(value);   \n    }\n}\n\nreturn sectionSelections;","supplementalCode":""}},"allowedSquareValues":{"name":"allowedSquareValues","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"\n//start with all values allowed - expresssed as an array of booleans\n//we will map the index of the array to selection values. Note that the\n//array is 0=based while the selections are one-based.\nlet allowedValueBools = (new Array(9).fill(true));\n\n//this function removes a selection from the array\nlet removeFromAllowedValues = selection => {\n    allowedValueBools[selection-1] = false;\n}\n\n//exclude values from other sqaures in the same row\nrowSelections.forEach(removeFromAllowedValues);\n\n//exclude values from other sqaures in the same row\ncolumnSelections.forEach(removeFromAllowedValues);\n\n//exclude values from other sqaures in the same row\nsectionSelections.forEach(removeFromAllowedValues);\n\n//now we will convert our arry of bools to a list of selections\nallowedValues = [];\nallowedValueBools.forEach( (allowed,index) => {\n    if(allowed) allowedValues.push(String(index+1));\n});\n\nreturn allowedValues;\n\n\n\n\n","supplementalCode":""}}}}}},"allowedMoves":{"name":"allowedMoves","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"//calculate allowed moves\nlet allowedSquareValuesGrid = [];\n\nfor(let ir = 0; ir < 9; ir++) {\n    allowedSquareValuesGrid[ir] = [];\n    for(let ic = 0; ic < 9; ic++) {\n        let squareResult = boardAnalysis[ir][ic];\n        if(squareResult.options) {\n            //if there is no selection, find the allowed values\n            allowedSquareValuesGrid[ir][ic] = squareResult.options.toString();\n        }\n        else {\n            //otherwise, show the current selection\n            allowedSquareValuesGrid[ir][ic] = `<${squareResult.selection}>`;\n        }\n    }\n}\n\nreturn allowedSquareValuesGrid;","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Sudoku Helper"}]},{"type":"paragraph","content":[{"type":"text","text":"This workspace is an aid for playing sudoku. It determines which squares are ruled out based on the other entries in a given row, column or section of the board."}]},{"type":"heading2","content":[{"type":"text","text":"Game Board"}]},{"type":"paragraph","content":[{"type":"text","text":"This is a copy of the game board, so you can revert to it if you screw up. Use the other game board below to play."}]},{"type":"apogeeComponent","attrs":{"name":"refGameBoard","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This is the game board that should be edited."}]},{"type":"apogeeComponent","attrs":{"name":"gameBoard","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Allowed Moves"}]},{"type":"paragraph","content":[{"type":"text","text":"This board contains the allowed moves for each square, based on the other values present in the given row, column and section. We use the function getAllowedSquareValues to find the value for each square that does not have a selection in it."}]},{"type":"apogeeComponent","attrs":{"name":"allowedMoves","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Processing"}]},{"type":"paragraph","content":[{"type":"text","text":"This data cell contains the allowed moves for each cell."}]},{"type":"apogeeComponent","attrs":{"name":"boardAnalysis","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"In the following table we just make a copy of the game board, verifying the input in the process."}]},{"type":"apogeeComponent","attrs":{"name":"gameBoardData","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"These are the legal selections:"}]},{"type":"apogeeComponent","attrs":{"name":"ALLOWED_SELECTIONS","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here we have a folder function to find the allowed values for a specific square given the current game board."}]},{"type":"apogeeComponent","attrs":{"name":"getAllowedSquareValues","id":0,"state":""}},{"type":"heading2"},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"},{"type":"paragraph"}]}},"children":{"gameBoard":{"type":"apogeeapp.JsonCell","dataView":"Grid","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":300},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"refGameBoard":{"type":"apogeeapp.JsonCell","dataView":"Grid","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":300},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"boardAnalysis":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":false,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"gameBoardData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"ALLOWED_SELECTIONS":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":false,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"getAllowedSquareValues":{"type":"apogeeapp.PageFunctionComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"getAllowedSquareValues"}]},{"type":"paragraph","content":[{"type":"text","text":"This page function finds the allowed values for a gameboard square given the square row and column and the game board data."}]},{"type":"heading2","content":[{"type":"text","text":"Inputs"}]},{"type":"paragraph","content":[{"type":"text","text":"This is the row index for the working square."}]},{"type":"apogeeComponent","attrs":{"name":"rowIndex","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This is the column index for the working square."}]},{"type":"apogeeComponent","attrs":{"name":"columnIndex","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"This is the game board data."}]},{"type":"apogeeComponent","attrs":{"name":"gameBoardData","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Processing"}]},{"type":"heading3","content":[{"type":"text","text":"Section Info"}]},{"type":"paragraph","content":[{"type":"text","text":"The following functions deal with sections. That is what I am calling a 3x3 section of the board. There may be a proper name for this, but I don't know much about sudoku so I am going with this."}]},{"type":"paragraph","content":[{"type":"text","text":"The naming conventions I am using is section number refers to the 3x3 square from the game board and section index refers to the sqaure within the section. The numbering/indexing starts at the top left (with 0) and increases by one as you go horizontally."}]},{"type":"paragraph","content":[{"type":"text","text":"Below are the section number and section index for the current active square."}]},{"type":"apogeeComponent","attrs":{"name":"sectionNumber","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"sectionIndex","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Selections"}]},{"type":"paragraph","content":[{"type":"text","text":"The following are the selections on the game board in the active row, excluding the current square."}]},{"type":"apogeeComponent","attrs":{"name":"rowSelections","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The following are the selections on the game board in the active column, excluding the current square."}]},{"type":"apogeeComponent","attrs":{"name":"columnSelections","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The following are the selections on the game board in the active section, excluding the current square."}]},{"type":"apogeeComponent","attrs":{"name":"sectionSelections","id":0,"state":""}},{"type":"paragraph"},{"type":"heading3","content":[{"type":"text","text":"Return Value"}]},{"type":"paragraph","content":[{"type":"text","text":"Here we calculate what values are allowed for a cell given the current game board data. This is also the return value."}]},{"type":"apogeeComponent","attrs":{"name":"allowedSquareValues","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"xx"}]}]}},"children":{"rowIndex":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"columnIndex":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"gameBoardData":{"type":"apogeeapp.JsonCell","dataView":"Grid","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":300},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"sectionNumber":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"sectionIndex":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"rowSelections":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false,"height":7000}}}}},"columnSelections":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"sectionSelections":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}},"allowedSquareValues":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":true,"height":7000}}}}}},"viewState":{"treeState":-1}},"allowedMoves":{"type":"apogeeapp.JsonCell","dataView":"Grid","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":300},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false,"height":7000}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true,"tabShowing":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}