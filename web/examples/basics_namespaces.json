{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":-1,"lists":{"es module":{"treeState":0},"js link":{"treeState":0},"css link":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"Pages and Namespaces","children":{"main":{"name":"main","type":"apogee.Folder","children":{"childPage":{"name":"childPage","type":"apogee.Folder","children":{"a":{"name":"a","type":"apogee.JsonMember","updateData":{"data":"This is cell a on childPage."}},"b":{"name":"b","type":"apogee.JsonMember","updateData":{"data":"This is cell b on childPage."}}}},"childPageAData":{"name":"childPageAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return childPage.a;","supplementalCode":""}},"childPageData":{"name":"childPageData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return childPage;","supplementalCode":""}},"otherTopLevelPageAData":{"name":"otherTopLevelPageAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return otherTopLevelPage.a;","supplementalCode":""}}}},"otherTopLevelPage":{"name":"otherTopLevelPage","type":"apogee.Folder","children":{"a":{"name":"a","type":"apogee.JsonMember","updateData":{"data":"This is cell a on otherTopLevelPage."}},"childPageAData":{"name":"childPageAData","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"//return main.childPage.a;\nreturn 0;","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Basics: Pages and Namespaces"}]},{"type":"paragraph","content":[{"type":"text","text":"A page is the name of a single \"document\" in the workspace. It includes the formatted description text and the cells. However, the page is more than just a display. It is a namespace for the cells on that page. In addition to these cells, it can also have child pages."}]},{"type":"paragraph","content":[{"type":"text","text":"To demonstrate what the page is we have added some child pages to this document. We will use this to show how the page relates the cells and to show the scope rules for accessing cells on different pages."}]},{"type":"paragraph","content":[{"type":"text","text":"We have added a single page, child"},{"type":"text","marks":[{"type":"italic"}],"text":"Page,"},{"type":"text","text":" as a child to the current page. We have also added another top level path "},{"type":"text","marks":[{"type":"italic"}],"text":"otherTopLevelPage"},{"type":"text","text":"."}]},{"type":"paragraph","content":[{"type":"text","text":"(To add a page, go to the tree panel on the left and select the main page. Open its context menu by right clicking on the page name or by using the page icon which doubles as a menu. Select the option \"Add Child Page\". Here the create/properties dialog opens where you set the name.)"}]},{"type":"heading2","content":[{"type":"text","text":"Page as a Namespace"}]},{"type":"paragraph","content":[{"type":"text","text":"Below we illustrate how a page is really a namespace for the cells on it."}]},{"type":"paragraph","content":[{"type":"text","text":"We set the value of the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"simplePageData"},{"type":"text","text":" below to the page "},{"type":"text","marks":[{"type":"italic"}],"text":"simplePage"},{"type":"text","text":". We see "},{"type":"text","marks":[{"type":"italic"}],"text":"simplePage"},{"type":"text","text":" behaves like a javascript object whose content is the cell values on it. This works not only for data cells but also function cells. Of course, if there were function cells on that page they would not show properly on this data cell which only shows JSON values."}]},{"type":"paragraph","content":[{"type":"text","text":"We access simplePage simply by using its name, since it is a child to the current page, as we see in the tree panel."}]},{"type":"apogeeComponent","attrs":{"name":"childPageData","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Scope Rules"}]},{"type":"paragraph","content":[{"type":"text","text":"We see above we can access a page just by using its name. We can access the child of a page just as you would expect."}]},{"type":"apogeeComponent","attrs":{"name":"childPageAData","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Likewise, we can access the other top level pages as you would expect."}]},{"type":"apogeeComponent","attrs":{"name":"otherTopLevelPageAData","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The rule for access variable names (cells, pages, etc) from a given page is as follows:"}]},{"type":"numberedList","content":[{"type":"listItem","content":[{"type":"text","text":"If there are local variables with the variable name given, those are used first, according to the standard rules of javascript."}]},{"type":"listItem","content":[{"type":"text","text":"If there are not local variables from the calling function/formula, the local page is checked to see if it has a cell (or page) of that name."}]},{"type":"listItem","content":[{"type":"text","text":"If there are no variables on the local page, the parent page is checked. This repeats for each parent page."}]},{"type":"listItem","content":[{"type":"text","text":"If the variable is not found in local code or on any of the pages, lastly global javascript variables are checked."}]}]},{"type":"paragraph","content":[{"type":"text","text":"Using the above rules, there are multiple ways to access a given variable/cell. For example, if we are on page "},{"type":"text","marks":[{"type":"italic"}],"text":"childPage"},{"type":"text","text":", we can access data on that page either by using the cell name, for example "},{"type":"text","marks":[{"type":"italic"}],"text":"a"},{"type":"text","text":", or by using the name of cell "},{"type":"text","marks":[{"type":"italic"}],"text":"a"},{"type":"text","text":" as referenced from a parent page, for example "},{"type":"text","marks":[{"type":"italic"}],"text":"childPage.a"},{"type":"text","text":"."}]},{"type":"paragraph"}]}},"children":{"childPage":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"This page just contains some simple data fields. "}]},{"type":"apogeeComponent","attrs":{"name":"a","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"b","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"a":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"b":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"childPageAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"childPageData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"otherTopLevelPageAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true,"tabShowing":true}},"otherTopLevelPage":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Other Top Level Page"}]},{"type":"paragraph","content":[{"type":"text","text":"This is another page in the top level of the workspace."}]},{"type":"paragraph","content":[{"type":"text","text":"Here is a dummy value for us to access."}]},{"type":"apogeeComponent","attrs":{"name":"a","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Gotcha!"}]},{"type":"paragraph","content":[{"type":"text","text":"In general we can access some data from "},{"type":"text","marks":[{"type":"italic"}],"text":"childPage"},{"type":"text","text":" under "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":" "},{"type":"text","marks":[{"type":"bold"}],"text":"EXCEPT"},{"type":"text","text":" in this case there is a problem, related to circular dependencies."}]},{"type":"paragraph","content":[{"type":"text","text":"If you uncomment the commented out code below there will be a circular reference. They are usually not as circuitous as this one. Here we have a problem because we must calculate "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":" to evaluate the function below. However, to calculate Main we must calculate this page since "},{"type":"text","marks":[{"type":"italic"}],"text":"main"},{"type":"text","text":" calls the variable o"},{"type":"text","marks":[{"type":"italic"}],"text":"therTopLevelPage"},{"type":"text","text":"."}]},{"type":"apogeeComponent","attrs":{"name":"childPageAData","id":0,"state":""}}]}},"children":{"a":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"childPageAData":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}