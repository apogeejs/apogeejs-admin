{"fileType":"apogee app js workspace","version":"0.50","references":{},"code":{"model":{"fileType":"apogee model","version":0.2,"name":"FormulaTestWorkspace","children":{"main":{"name":"main","type":"apogee.Folder","children":{"messengerPromise":{"name":"messengerPromise","type":"apogee.JsonTable","updateData":{"data":1585952224851}},"messengerInvalidValue":{"name":"messengerInvalidValue","type":"apogee.JsonTable","updateData":{"invalidValue":true}},"messengerError":{"name":"messengerError","type":"apogee.JsonTable","updateData":{"errorList":["Error: Test error!"]}},"messengerValue":{"name":"messengerValue","type":"apogee.JsonTable","updateData":{"data":1585952221851}},"staticValueTest":{"name":"staticValueTest","type":"apogee.JsonTable","updateData":{"data":[1,2,3]}},"simpleFormulaTest":{"name":"simpleFormulaTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"let value = apogeeutil.jsonCopy(staticValueTest);\nvalue.push(4);\nreturn value;","supplementalCode":""}},"invalidValueTest":{"name":"invalidValueTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return apogeeutil.INVALID_VALUE;","supplementalCode":""}},"codeErrorTest":{"name":"codeErrorTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return foo(;","supplementalCode":""}},"errorReturnTest":{"name":"errorReturnTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return new Error(\"This is an error as a return value.\");","supplementalCode":""}},"thrownErrorTest":{"name":"thrownErrorTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"throw new Error(\"This is a thrown error.\");","supplementalCode":""}},"promiseAndMessengerTest":{"name":"promiseAndMessengerTest","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"//set current time on table d\nlet currentTime = Date.now();\napogeeMessenger.dataUpdate(\"messengerValue\",currentTime);\n\n//set the future time here\nlet timeoutFunction;\nlet timeoutPromise = new Promise((resolve,reject) => {\n    timeoutFunction = () => {\n        resolve(Date.now());\n    }\n});\n\nsetTimeout(timeoutFunction,3000);\n\n\napogeeMessenger.dataUpdate(\"messengerPromise\",timeoutPromise);\napogeeMessenger.compoundDataUpdate([[\"messengerError\",new Error(\"Test error!\")],[\"messengerInvalidValue\",apogeeutil.INVALID_VALUE]]);\n\nreturn timeoutPromise;","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Formula Tests"}]},{"type":"paragraph","content":[{"type":"text","text":"These are several tests for members and formulas. Several of the members have errors so the page itself should display errors. Also, within the members themselves, some are pending and some are invalid."}]},{"type":"heading2","content":[{"type":"text","text":"Basic Tests"}]},{"type":"heading3","content":[{"type":"text","text":"Static Value Test"}]},{"type":"paragraph","content":[{"type":"text","text":"Here we just set a static data value."}]},{"type":"apogeeComponent","attrs":{"name":"staticValueTest","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Simple Formula Tests"}]},{"type":"paragraph","content":[{"type":"text","text":"Here we have a simple formula, depending on \"staticValueTest\"."}]},{"type":"apogeeComponent","attrs":{"name":"simpleFormulaTest","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here we have a simple formula with a code error."}]},{"type":"apogeeComponent","attrs":{"name":"codeErrorTest","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here we have a thrown error in a formula."}]},{"type":"apogeeComponent","attrs":{"name":"thrownErrorTest","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here we have a simple formula that returns an Error object (as opposed to throwing an error in the formula."}]},{"type":"apogeeComponent","attrs":{"name":"errorReturnTest","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"Here we have a simple formula that returns \"INVALID_VALUE\""}]},{"type":"apogeeComponent","attrs":{"name":"invalidValueTest","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Promise and Messenger Tests"}]},{"type":"paragraph","content":[{"type":"text","text":"This formula returns a promise. On opening or saving the formula, it should be in a pending state."}]},{"type":"paragraph","content":[{"type":"text","text":"This formula also uses the messenger (only because I had a promise handy to send to another member). It tests the different messenger cases, sending to members in the \"Messenger Receive Members\" section below."}]},{"type":"paragraph","content":[{"type":"text","text":"The messenger cases tested are:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"Data update"}]},{"type":"listItem","content":[{"type":"text","text":"Compound data update"}]},{"type":"listItem","content":[{"type":"text","text":"Send a normal value (dataUpdate)"}]},{"type":"listItem","content":[{"type":"text","text":"Send a promise value (dataUpdate)"}]},{"type":"listItem","content":[{"type":"text","text":"Send an error value (compoundUpdate part 1)"}]},{"type":"listItem","content":[{"type":"text","text":"Send an invalid value. (compoundUpdate part 2)"}]}]},{"type":"apogeeComponent","attrs":{"name":"promiseAndMessengerTest","id":0,"state":""}},{"type":"heading4","content":[{"type":"text","text":"Messenger Receive Members"}]},{"type":"paragraph","content":[{"type":"text","text":"The following members are recievers for the different messenger cases:"}]},{"type":"apogeeComponent","attrs":{"name":"messengerValue","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"messengerPromise","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"messengerInvalidValue","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"messengerError","id":0,"state":""}}]}},"children":{"messengerPromise":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized"},"messengerInvalidValue":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"messengerError":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"messengerValue":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"staticValueTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"simpleFormulaTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"invalidValueTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"codeErrorTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"errorReturnTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"thrownErrorTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"promiseAndMessengerTest":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized"}}}}}}