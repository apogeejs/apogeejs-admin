<!DOCTYPE html>
<html>
	<head>
		<title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <link rel="stylesheet" type="text/css" href="/apogeeview/apogeeapp.css">
        <link rel="stylesheet" type="text/css" href="/apogeeview/componentdisplay/ComponentDisplay.css">
        <link rel="stylesheet" type="text/css" href="/apogeewebview/componentdisplay/WebView.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/window/dialog.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/displayandheader/DisplayAndHeader.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/menu/Menu.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/splitpane/SplitPane.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/tabframe/TabFrame.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/treecontrol/TreeControl.css">
        <link rel="stylesheet" type="text/css" href="/apogeeui/configurablepanel/ConfigurablePanel.css">     
        <link rel="stylesheet" type="text/css" href="/ext/handsontable/handsontable_6.2.0/handsontable.full.min.css">
        <!-- <link rel="stylesheet" type="text/css" href="/gulp/dist/v0.9.0a/assets/cssBundle.css"> -->

        <style>
            body {
                padding: 10px;
            }
            .cellViewContainer {
                width: 600px;
            }
        </style>
   
        
        <script type="module">
            import {ApogeeWebView} from "/webruntime/webRuntimeLib.js";
        
            //configure app and load the workspace
            let workspaceUrl = "webAppTestWorkspace.json";
            let appView;

			window.init = function() {
                appView = new ApogeeWebView();

                //this adds a display view to the page to the given element
                //should be done before the workspace is loaded.
                appView.addDisplay("main.inputCell","inputDisplayElement",true,"Data");
                appView.addDisplay("main.outputCell","outputDisplayElement",true,"Data");

                //this adds a listener for creation or updated to a component
                //should be done before workspace is loaded
                let callback = component => alert("Demo of listener: " + component.getName() + " value updated!");
                appView.addComponentListener("main.outputCell",callback);

                appView.openWorkspace(workspaceUrl);
            }
            
		</script>
	</head>
    <body onload="init()">
        <h1>Simple Example of Embedding a Apogee Workspace in a Web Page.</h1>
        <p>You can expose the display elements from an Apogee workspace in a web application. This page is very ugly but you can make it much prettier.</p>

        <p>This is input cell:</p>
        <div class="cellViewContainer" id="inputDisplayElement"></div>

        <p>This is output cell:</p>
        <div class="cellViewContainer" id="outputDisplayElement"></div>
	</body>
</html>
