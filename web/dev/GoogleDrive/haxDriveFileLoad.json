{
	"name": "CloudTest",
	"fileType": "apogee app js workspace",
	"workspace": {
		"name": "CloudTest",
		"fileType": "apogee workspace",
		"version": 0.2,
		"data": {
			"name": "Model",
			"type": "apogee.Folder",
			"children": {
				"Load": {
					"name": "Load",
					"type": "apogee.Control",
					"updateData": {
						"argList": [
							"resource"
						],
						"functionBody": "resource.setCallbacks(onDownloadPress,onUploadPress);",
						"supplementalCode": "\r\nvar client = null;\r\nvar doAfterClientLoad = null;\r\n\r\nfunction onDownloadPress() {\r\n//    if(client === null) {\r\n        doAfterClientLoad = doDownload;\r\n        loadClient();\r\n//    }\r\n//    else {\r\n//        client.then(doDownload);\r\n//    }\r\n}\r\n\r\nfunction onUploadPress() {\r\n//    if(client === null) {\r\n        doAfterClientLoad = doUpload;\r\n        loadClient();\r\n//    }\r\n//    else {\r\n//        client.then(doUpload);\r\n//    }\r\n}\r\n\r\n// Your Client ID can be retrieved from your project in the Google\r\n// Developer Console, https://console.developers.google.com\r\nvar CLIENT_ID = '105795106133-2s6hcm7d2hoombjmkjgo4a86bi2gsnj9.apps.googleusercontent.com';\r\n\r\nvar SCOPES = [\"https://www.googleapis.com/auth/drive\",\"https://www.googleapis.com/auth/drive.file\"];\r\n\r\nfunction loadClient() {\r\n    checkAuth();\r\n}\r\n\r\n/**\r\n * Check if current user has authorized this application.\r\n */\r\nfunction checkAuth() {\r\n    gapi.auth.authorize(\r\n            {\r\n                \"client_id\": CLIENT_ID,\r\n                \"scope\": SCOPES.join(' '),\r\n                \"immediate\": true\r\n            },\r\n            handleAuthResult);\r\n}\r\n\r\n/**\r\n * Handle response from authorization server.\r\n *\r\n * @param {Object} authResult Authorization result.\r\n */\r\nfunction handleAuthResult(authResult) {\r\n    if (authResult && !authResult.error) {\r\n        loadDriveApi();\r\n    } else {\r\n        getAuth();\r\n    }\r\n}\r\n\r\n/**\r\n * Initiate auth flow in response to user clicking authorize button.\r\n *\r\n * @param {Event} event Button click event.\r\n */\r\nfunction getAuth(event) {\r\n    gapi.auth.authorize(\r\n            {\"client_id\": CLIENT_ID, \"scope\": SCOPES, \"immediate\": false},\r\n            handleAuthResult);\r\n    return false;\r\n}\r\n\r\n/**\r\n * Load Sheets API client library.\r\n */\r\nfunction loadDriveApi() {\r\n    client = gapi.client.load('drive','v3',doAfterClientLoad);\r\n    doAfterClientLoad = null;\r\n}\r\n\r\n//txt - 0B4F9nNFxZhasZGFpbzdiaGs3Q3c\r\n//doc - 1PPOXFRk2oJXSjXMYP4l7IRqBF3Rip4jcOBFX3T5qsDo\r\nfunction doDownload() {\r\n    // var request = gapi.client.drive.files.export({\r\n    //     \"fileId\": '1PPOXFRk2oJXSjXMYP4l7IRqBF3Rip4jcOBFX3T5qsDo',\r\n    //     \"mimeType\": \"text/plain\"\r\n    // });\r\n    var request = gapi.client.drive.files.get({\r\n        \"fileId\": '0B4F9nNFxZhasZGFpbzdiaGs3Q3c',\r\n        \"alt\": 'media'\r\n    });\r\n    request.execute(downloadResult,errorResult);\r\n}\r\n\r\nfunction doUpload() {\r\n    alert(\"NOT IMPLEMENTED\");\r\n    if(true) return;\r\n    \r\n    var uploadData = {};\r\n    uploadData.spreadsheetId = '1xM9hFvTs69baR6v9jI3eMa2SLuDBTFkNRIEdUJh58xY';\r\n    uploadData.valueInputOption=\"USER_ENTERED\";\r\n    uploadData.range = 'Sheet1!A1:G';\r\n    uploadData.values = grid;\r\n    var loadData = gapi.client.sheets.spreadsheets.values.update(uploadData);\r\n    loadData.then(uploadResult,errorResult);\r\n}\r\n\r\n\r\n\r\nfunction downloadResult(response) {\r\n    setTableData(response);\r\n}\r\n\r\nfunction uploadResult(response) {\r\n    alert(JSON.stringify(response));\r\n}\r\n\r\nfunction errorResult(response) {\r\n    alert('Error: ' + response.result.error.message);\r\n}\r\n\r\nfunction setTableData(data) {\r\n    var workspace = app.getWorkspace(\"CloudTest\");\r\n    var rootFolder = workspace.getRoot();\r\n    var jsonTable = rootFolder.lookupChildFromPathArray([\"data\"]);\r\n    if(jsonTable) {\r\n        var actionResponse = apogee.updatemember.updateData(jsonTable,data);\r\n        if(actionResponse.getSuccess()) {\r\n            //alert(\"Data loaded!\");\r\n        }\r\n        else {\r\n            alert(actionResponse.getErrorMsg());\r\n        }\r\n    }\r\n    \r\n}"
					}
				},
				"data": {
					"name": "data",
					"type": "apogee.JsonTable",
					"updateData": {
						"data": {
							"presetOverrides": [
								"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/presets"
							],
							"stringsOverrides": [],
							"themeMapOverrides": [
								"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/thememap"
							],
							"inputColorsOverrides": [],
							"themeOverrides": {
								"Standard": [
									"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/theme/standard"
								],
								"Factory": [
									"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/theme/factory"
								]
							},
							"result": {
								"presetOverrides": [
									"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/presets"
								],
								"stringsOverrides": [],
								"themeMapOverrides": [
									"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/thememap"
								],
								"inputColorsOverrides": [],
								"themeOverrides": {
									"Standard": [
										"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/theme/standard"
									],
									"Factory": [
										"http://factory-mfs.micello.com/ms/v1/mfile/map/71/overrides/theme/factory"
									]
								}
							}
						}
					}
				}
			}
		}
	},
	"components": {
		"type": "apogeeapp.app.FolderComponent",
		"children": {
			"Load": {
				"key": "CloudTest:Load",
				"type": "apogeeapp.app.CustomControlComponent",
				"coordInfo": {
					"x": 31,
					"y": 169,
					"width": 1074,
					"height": 704
				},
				"windowState": 0,
				"resource": {
					"html": "",
					"customizeScript": "var resource = {};\r\n\r\nresource.setComponent = function(component) {\r\n    var loadButton = document.createElement(\"input\");\r\n    loadButton.setAttribute(\"type\",\"button\");\r\n    loadButton.value = \"Download\";\r\n    loadButton.onclick = function() {\r\n        if(resource.onDownload) {\r\n            resource.onDownload();\r\n        }\r\n    }\r\n    \r\n    var saveButton = document.createElement(\"input\");\r\n    saveButton.setAttribute(\"type\",\"button\");\r\n    saveButton.value = \"Upload\";\r\n    saveButton.onclick = function() {\r\n        if(resource.onUpload) {\r\n            resource.onUpload();\r\n        }\r\n    }\r\n    \r\n    var container = component.getOutputElement();\r\n    container.innerHTML = \"\";\r\n    container.appendChild(loadButton);\r\n    container.appendChild(saveButton);\r\n}\r\n\r\nresource.setCallbacks = function(onDownload,onUpload) {\r\n    resource.onDownload = onDownload;\r\n    resource.onUpload = onUpload;\r\n}\r\n\r\nreturn resource;\r\n",
					"supplementalCode": "",
					"css": ""
				}
			},
			"data": {
				"key": "CloudTest:data",
				"type": "apogeeapp.app.JsonTableComponent",
				"coordInfo": {
					"x": 239,
					"y": 12,
					"width": 850,
					"height": 567
				},
				"windowState": 0
			}
		}
	},
	"version": 0.4,
	"references": [
		{
			"url": "https://apis.google.com/js/client.js",
			"entryType": "js link"
		}
	]
}