{"fileType":"apogee app js workspace","version":"0.40","references":[],"workspace":{"fileType":"apogee workspace","version":0.2,"name":"OpenCommunityOverrides","data":{"name":"Model","type":"apogee.Folder","children":{"overridesTemplate":{"name":"overridesTemplate","type":"apogee.JsonTable","updateData":{"data":"http://eng.micello.com/mfs/ms/v1/mfile/map/{0}/overrides","description":""}},"cid":{"name":"cid","type":"apogee.JsonTable","updateData":{"data":30,"description":""}},"overridesFile":{"name":"overridesFile","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var baseUrl = apogee.util.formatString(overridesTemplate,cid);\nvar completedUrl = login.appendQueryParams(baseUrl);\n\nreturn apogee.net.jsonRequest(completedUrl);","supplementalCode":"","description":""}},"login":{"name":"login","type":"apogee.Folder","children":{"loginUrl":{"name":"loginUrl","type":"apogee.JsonTable","updateData":{"data":"http://eng.micello.com/TestAuthorization/loginjson","description":""}},"sessionResponse":{"name":"sessionResponse","type":"apogee.JsonTable","updateData":{"data":{"responseCode":1,"paramTable":[{"urlPattern":"http://eng.micello.com/mfs","params":[["key","S1sshnIV1Rk9EGz32Acrl8aSYsTKYd"]]},{"urlPattern":"http://mfs.micello.com","params":[["key","nS71TmmSmgvwcXlfrGrin38AMLP48B"]]},{"urlPattern":"http://factory-mfs.micello.com","params":[["key","yfZkszbELEy6lxz1sSeUZscJlC41hL"]]},{"urlPattern":"http://mfs-hub-master.micello.com/","params":[["key","pvLuRozg2EZVrpE8nCpCrQT0FOHcLh"]]},{"urlPattern":"http://mfs-us-1.micello.com","params":[["key","nS71TmmSmgvwcXlfrGrin38AMLP48B"]]},{"urlPattern":"http://eng.micello.com/mfs-node","params":[["key","dnSkxyrgxRNtGMUYbhgV8uvdPW1V4U"]]},{"urlPattern":"http://int.micello.com/mfs","params":[["key","u1VjArfzrFKvBr7X7UVRxFB4eDQmqR"]]}],"sessionKey":"SESS0f6c4c2238a670b8138b63d9fd03cc22=bqr1l31s7qjfoceh5djucs4i62"},"description":""}},"savedUserName":{"name":"savedUserName","type":"apogee.JsonTable","updateData":{"data":"dave","description":""}},"loginControl":{"name":"loginControl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var onSubmit = (formData) => {\n    \n    //on click\n    var bodyJson = {};\n    bodyJson.userName = formData.userName;\n    bodyJson.password = formData.password;\n    \n    var options = {};\n    options.body = JSON.stringify(bodyJson);\n    options.method = \"POST\";\n    \n    var requestPromise = apogee.net.jsonRequest(loginUrl,options);\n    \n    //set the response\n    apogeeMessenger.asynchDataUpdate(\"sessionResponse\",requestPromise);\n    \n    //this clears the password...\n    apogeeMessenger.dataUpdate(\"savedUserName\",formData.userName);\n}\n\nvar layout = [];\n\n//title\nentry = {};\nentry.type = \"heading\";\nentry.level = 2;\nentry.text = \"Login\";\nlayout.push(entry);\n\n//text entry\nentry = {};\nentry.type = \"textField\";\nentry.label = \"User Name: \";\nentry.key = \"userName\";\nentry.value = savedUserName;\nlayout.push(entry);\n\n//text entry\nentry = {};\nentry.type = \"textField\";\nentry.label = \"Password: \";\nentry.password = true;\nentry.key = \"password\";\nlayout.push(entry);\n\n//suvbmit (no cancel)\nentry = {};\nentry.type = \"submit\";\nentry.onSubmit = onSubmit;\nlayout.push(entry);\n\nreturn layout;\n","supplementalCode":"","description":""}},"sessionKey":{"name":"sessionKey","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(sessionResponse.sessionKey) {\n    return sessionResponse.sessionKey;\n}\nelse if(sessionResponse.responseCode < 0) {\n    throw new Error(\"Error in login: \" + sessionResponse.message);\n}\nelse {\n    return \"LOGIN NEEDED!\";\n}","supplementalCode":"","description":""}},"appendQueryParams":{"name":"appendQueryParams","type":"apogee.FunctionTable","updateData":{"argList":["inUrl"],"functionBody":"if((!sessionResponse)||(!sessionResponse.paramTable)) {\n    throw new Error(\"Param table not loaded!\");\n}\n\nvar isMatchingKey = (paramEntry) => inUrl.startsWith(paramEntry.urlPattern);\n\nvar paramEntry = sessionResponse.paramTable.find(isMatchingKey);\n\nif(paramEntry) {\n    if(paramEntry.params.length > 1) {\n        throw new Error(\"Code only supports 1 appended parameter. (Is an easy fi to add more)\")\n    }\n    else if(paramEntry.params.length === 1) {\n        return inUrl + \"?\" + paramEntry.params[0][0] + \"=\" + paramEntry.params[0][1];\n    }\n}\n      \n//no params to add\nreturn inUrl;\n","supplementalCode":"","description":""}}}},"overrideFileUrls":{"name":"overrideFileUrls","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"const LIST_KEYS = [\"presetOverrides\",\"themeMapOverrides\",\"stringsOverrides\",\"inputColorOverrides\"];\nconst MAP_KEYS = [\"themeOverrides\"];\n\nvar urlList = [];\n\nLIST_KEYS.forEach( tag => {\n    var itemList = overridesFile[tag];\n    if(itemList) {\n        itemList.forEach( url => {\n            if(urlList.indexOf(url) < 0) {\n                urlList.push(url);\n            }\n        });\n    }\n});\n\n\nMAP_KEYS.forEach( tag => {\n    var itemMap = overridesFile[tag];\n    if(itemMap) {\n        for(var key in itemMap) {\n            var itemList = itemMap[key];\n            if(itemList) {\n                itemList.forEach( url => {\n                    if(urlList.indexOf(url) < 0) {\n                        urlList.push(url);\n                    }\n                });\n            }\n        }\n    }\n});\n\nreturn urlList;","supplementalCode":"","description":""}},"overrideFiles":{"name":"overrideFiles","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var promiseList = overrideFileUrls.map(url => apogee.net.jsonRequest(login.appendQueryParams(url)));\n\nreturn Promise.all(promiseList);","supplementalCode":"","description":""}},"fileIndex":{"name":"fileIndex","type":"apogee.JsonTable","updateData":{"data":0,"description":""}},"file":{"name":"file","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if((fileIndex < 0)||(overrideFileUrls.length <= fileIndex)) {\n    return \"Index out of range\";\n}\n\nreturn overrideFiles[fileIndex];","supplementalCode":"","description":""}},"fileUrl":{"name":"fileUrl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if((fileIndex < 0)||(overrideFileUrls.length <= fileIndex)) {\n    return \"Index out of range\";\n}\n\nreturn overrideFileUrls[fileIndex];","supplementalCode":"","description":""}},"NOTES":{"name":"NOTES","type":"apogee.JsonTable","updateData":{"data":"Set the CID value to load an overrides file.\n\nSet the file index to display one of the overrides files.","description":""}}}}},"components":{"type":"apogeeapp.app.FolderComponent","tabOpen":true,"treeState":1,"children":{"overridesTemplate":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":528,"height":31},"posInfo":{"x":51,"y":19},"state":0,"viewType":"Data"},"dataView":"Colorized"},"cid":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":507,"height":32},"posInfo":{"x":51,"y":136},"state":0,"viewType":"Data"},"dataView":"Colorized"},"overridesFile":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":627,"height":385},"posInfo":{"x":54,"y":256},"state":0,"viewType":"Data"},"dataView":"Colorized"},"login":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":1595,"y":330}},"tabOpen":true,"treeState":1,"children":{"loginUrl":{"type":"apogeeapp.app.TextComponent","windowState":{"sizeInfo":{"width":465,"height":43},"posInfo":{"x":26,"y":27},"state":-1,"viewType":"Text"}},"sessionResponse":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":697,"height":330},"posInfo":{"x":17,"y":355},"state":0,"viewType":"Data"},"dataView":"Colorized"},"savedUserName":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":284,"height":69},"posInfo":{"x":24,"y":72},"state":-1,"viewType":"Data"},"dataView":"Colorized"},"loginControl":{"type":"apogeeapp.app.DynamicForm","windowState":{"sizeInfo":{"width":357,"height":217},"posInfo":{"x":280,"y":33},"state":0,"viewType":"Output"}},"sessionKey":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":555,"height":68},"posInfo":{"x":789,"y":596},"state":0,"viewType":"Data"},"dataView":"Colorized"},"appendQueryParams":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":845,"height":400},"posInfo":{"x":778,"y":88},"state":0,"viewType":"Code"}}}},"overrideFileUrls":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":874,"height":203},"posInfo":{"x":764,"y":25},"state":0,"viewType":"Data"},"dataView":"Colorized"},"overrideFiles":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":923,"height":300},"posInfo":{"x":1595,"y":370},"state":-1,"viewType":"Data"},"dataView":"Colorized"},"fileIndex":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":63},"posInfo":{"x":772,"y":298},"state":0,"viewType":"Data"},"dataView":"Colorized"},"file":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":725,"height":612},"posInfo":{"x":776,"y":515},"state":0,"viewType":"Data"},"dataView":"Colorized"},"fileUrl":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":655,"height":40},"posInfo":{"x":776,"y":414},"state":0,"viewType":"Data"},"dataView":"Colorized"},"NOTES":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":608,"height":300},"posInfo":{"x":54,"y":707},"state":0,"viewType":"Data"},"dataView":"Text Data"}}},"activeTabMember":"Model"}