{
	"fileType": "apogee app js workspace",
	"workspace": {
		"fileType": "apogee workspace",
		"version": 0.2,
		"data": {
			"name": "Model",
			"type": "apogee.Folder",
			"children": {
				"loginUrl": {
					"name": "loginUrl",
					"type": "apogee.JsonTable",
					"updateData": {
						"data": "http://localhost:8080/TestAuthorization/loginjson",
						"description": ""
					}
				},
				"loginControl": {
					"name": "loginControl",
					"type": "apogee.JsonTable",
					"updateData": {
						"argList": [],
						"functionBody": "return loginUrl;",
						"supplementalCode": "",
						"description": ""
					}
				},
				"sessionResponse": {
					"name": "sessionResponse",
					"type": "apogee.JsonTable",
					"updateData": {
						"data": {
							"sessionKey": "SESS0f6c4c2238a670b8138b63d9fd03cc22=mfrgk1ftdomp042viv8lqt5ic1",
							"responseCode": 1
						},
						"description": ""
					}
				},
				"sessionKey": {
					"name": "sessionKey",
					"type": "apogee.JsonTable",
					"updateData": {
						"argList": [],
						"functionBody": "if(!sessionResponse) return \"\";\n\nif(sessionResponse.responseCode === 1) {\n    return sessionResponse.sessionKey;\n}\nelse {\n    throw new Error(\"Login error: \" + sessionResponse.message);\n}",
						"supplementalCode": "",
						"description": ""
					}
				}
			}
		},
		"name": "login"
	},
	"components": {
		"type": "apogeeapp.app.FolderComponent",
		"children": {
			"loginUrl": {
				"type": "apogeeapp.app.TextComponent",
				"windowState": {
					"sizeInfo": {
						"width": 463,
						"height": 106
					},
					"posInfo": {
						"x": 27,
						"y": 42
					},
					"state": 0,
					"viewType": "Text"
				}
			},
			"loginControl": {
				"type": "apogeeapp.app.CustomControlComponent",
				"windowState": {
					"sizeInfo": {
						"width": 343,
						"height": 101
					},
					"posInfo": {
						"x": 32,
						"y": 183
					},
					"state": 0,
					"viewType": "Output"
				},
				"resource": {
					"html": "",
					"css": "",
					"setData": "this.loginUrl = data;",
					"constructorAddition": "\n\n//this uses the updated version of test authorization that takes and returns a JSON\nthis.onClick = function() {\n    \n    //get the output table\n    var outputTableName = \"sessionResponse\";\n    var fromMember = mode.getMember();\n    \n    //on click\n    var bodyJson = {};\n    bodyJson.userName = resource.userInput.value;\n    bodyJson.password = resource.passwordInput.value;\n    \n    //cleaer password field\n    resource.passwordInput.value = \"\";\n    \n    var options = {};\n    options.body = JSON.stringify(bodyJson);\n    options.method = \"POST\";\n    \n    var requestPromise = apogee.net.jsonRequest(this.loginUrl,options);\n    apogee.action.asynchDataUpdate(outputTableName,fromMember,requestPromise);\n}",
					"init": "\nvar label1 = document.createElement(\"label\");\nlabel1.for = \"userInput\";\nlabel1.innerHTML = \"User:\"\nelement.appendChild(label1);\n\nvar input1 = document.createElement(\"input\");\ninput1.id = \"userInput\";\nresource.userInput = input1;\nelement.appendChild(input1);\n\nelement.appendChild(document.createElement(\"br\"));\n\nvar label2 = document.createElement(\"label\");\nlabel2.for = \"passwordInput\";\nlabel2.innerHTML = \"Password:\"\nelement.appendChild(label2);\n\nvar input2 = document.createElement(\"input\");\ninput2.type = \"password\";\ninput2.id = \"passwordInput\";\nresource.passwordInput = input2;\nelement.appendChild(input2);\n\nelement.appendChild(document.createElement(\"br\"));\n\nvar button = document.createElement(\"button\");\nbutton.innerHTML = \"Login\";\nelement.appendChild(button);\n\nvar instance = this;\nbutton.onclick = function() {\n    instance.onClick();\n}\n\n\n"
				}
			},
			"sessionResponse": {
				"type": "apogeeapp.app.JsonTableComponent",
				"windowState": {
					"sizeInfo": {
						"width": 697,
						"height": 158
					},
					"posInfo": {
						"x": 34,
						"y": 340
					},
					"state": 0,
					"viewType": "Text"
				}
			},
			"sessionKey": {
				"type": "apogeeapp.app.JsonTableComponent",
				"windowState": {
					"sizeInfo": {
						"width": 587,
						"height": 167
					},
					"posInfo": {
						"x": 41,
						"y": 550
					},
					"state": 0,
					"viewType": "Text"
				}
			}
		}
	},
	"version": 0.4,
	"references": []
}