{"fileType":"apogee workspace","jsLinks":[],"cssLinks":[],"workspace":{"fileType":"apogee workspace","version":0.2,"data":{"name":"ingestMetaFile","type":"apogee.Folder","children":{"inputProcessing":{"name":"inputProcessing","type":"apogee.Folder","children":{"inputFile":{"name":"inputFile","type":"apogee.JsonTable","updateData":{"data":{"#DBE5F1":{"props":{"area":"aisle"}},"#CE7424":{"props":{"area":"baggage claim"}},"#143310":{"props":{"area":"copy/print"}},"#C99C73":{"props":{"area":"immigration and customs"}},"#D0D0D0":{"props":{"area":"parcel"}},"#153E11":{"props":{"area":"pet relief area"}},"#133C0F":{"props":{"area":"rest area"}},"#686868":{"props":{"area":"section"}},"#DDD9C3":{"props":{"area":"section"}},"#455B46":{"props":{"area":"security section"}},"#F4EC9A":{"props":{"area":"smoke"}},"#DADADA":{"props":{"area":"true"}},"#4383D1":{"props":{"barrier":"gate"}},"#404040":{"props":{"barrier":"obstruction"}},"#93CC93":{"props":{"facility":"bathroom","gender":"family","disabled access":"true"}},"#96CC96":{"props":{"facility":"bathroom","gender":"family"}},"#95BF95":{"props":{"facility":"bathroom","gender":"female","disabled access":"true"}},"#99CC99":{"props":{"facility":"bathroom","gender":"female"}},"#B5E2B5":{"props":{"facility":"bathroom","gender":"male","disabled access":"true"}},"#CCFFCC":{"props":{"facility":"bathroom","gender":"male"}},"#669966":{"props":{"facility":"bathroom"}},"#666666":{"props":{"facility":"column"}},"#990033":{"props":{"facility":"door"}},"#996033":{"props":{"facility":"doorway"}},"#CC6633":{"props":{"facility":"elevator"}},"#663300":{"props":{"facility":"escalator"}},"#909090":{"props":{"facility":"floor opening"}},"#B0B0B0":{"props":{"facility":"hallway"}},"#24A5A8":{"props":{"facility":"inaccessible space"}},"#000029":{"props":{"facility":"moving walkway"}},"#993033":{"props":{"facility":"opening"}},"#E4E1CE":{"props":{"facility":"patio"}},"#D1CAAA":{"props":{"facility":"platform"}},"#A0A0B3":{"props":{"facility":"ramp"}},"#E5E0EC":{"props":{"facility":"room","use":"auditorium"}},"#DBEEF3":{"props":{"facility":"room","use":"cafeteria"}},"#DFE6F1":{"props":{"facility":"room","use":"classroom"}},"#F7EF9D":{"props":{"facility":"room","use":"gym"}},"#F2DDDC":{"props":{"facility":"room","use":"lab"}},"#EAF1DD":{"props":{"facility":"room","use":"library"}},"#DBD0C0":{"props":{"facility":"room","use":"locker room"}},"#194215":{"props":{"facility":"room","use":"lost and found"}},"#F2EA98":{"props":{"facility":"room","use":"meditation room"}},"#DBE0F0":{"props":{"facility":"room","use":"office"}},"#6DACF7":{"props":{"facility":"unit","use":"gift card"}},"#85A3CB":{"props":{"facility":"room"}},"#C5BEA1":{"props":{"facility":"stage"}},"#990000":{"props":{"facility":"stairs"}},"#D8D8D8":{"props":{"facility":"step"}},"#0F387B":{"props":{"facility":"unit","class":"car rental"}},"#03F9A8":{"props":{"facility":"unit","class":"cocktails"}},"#EB974E":{"props":{"facility":"unit","class":"restaurant"}},"#F0E896":{"props":{"facility":"unit","class":"food and drink"}},"#FBF3A1":{"props":{"facility":"unit","class":"money changer"}},"#163F12":{"props":{"facility":"unit","class":"movie theater"}},"#F5ED9B":{"props":{"facility":"unit","class":"shoe shine"}},"#FCF4A2":{"props":{"facility":"unit","class":"transit hotel"}},"#4055A0":{"props":{"facility":"unit","use":"customer service"}},"#FDF5A3":{"props":{"facility":"unit","use":"information"}},"#A3B9D8":{"props":{"facility":"unit"}},"#4343EF":{"props":{"facility":"wall"}},"#4D93E1":{"props":{"facility":"window"}},"#336699":{"props":{"fixture":"booth"}},"#999933":{"props":{"fixture":"checkout"}},"#788FB0":{"props":{"fixture":"kiosk"}},"#0CF242":{"props":{"fixture":"ramp","disabled access":"true"}},"#A0A0A3":{"props":{"fixture":"ramp"}},"#C5BE97":{"props":{"fixture":"stage"}},"#95B3D7":{"props":{"furnishing":"bin"}},"#009999":{"props":{"furnishing":"desk"}},"#BBCCDD":{"props":{"furnishing":"shelf"}},"#AACCCC":{"props":{"furnishing":"locker"}},"#409988":{"props":{"furnishing":"table"}},"#1E471B":{"props":{"marker":"disabled access","nonphysical":"true"}},"#002040":{"props":{"marker":"entrance","nonphysical":"true"}},"#6600CC":{"props":{"marker":"large text","nonphysical":"true"}},"#330033":{"props":{"marker":"small text","nonphysical":"true"}},"#A5A5A5":{"props":{"marker":"traffic marker"}},"#202020":{"props":{"marker":"true"}},"#AAFFAA":{"props":{"meta":"ground intersect"}},"#00FF00":{"props":{"meta":"guide"}},"#88FF88":{"props":{"meta":"level outline"}},"#CC3333":{"props":{"object":"INVALID"}},"#B8B8B8":{"props":{"object":"true","$style":"Invisible"}},"#FFAD33":{"props":{"object":"true","name":"$ref_a","$style":"Invisible"}},"#FFC166":{"props":{"object":"true","name":"$ref_b","$style":"Invisible"}},"#CC7A00":{"props":{"object":"true","name":"$ref_c","$style":"Invisible"}},"#8E5500":{"props":{"object":"true","name":"$ref_d","$style":"Invisible"}},"#513000":{"props":{"object":"true","name":"$ref_e","$style":"Invisible"}},"#808080":{"props":{"object":"true"}},"#FF0000":{"props":{"object":"unknown"}},"#143D10":{"props":{"recreation":"playground"}},"#F8F09E":{"props":{"safety":"defibrillator"}},"#1D4619":{"props":{"safety":"emergency exit"}},"#1C4518":{"props":{"safety":"fire extinguisher"}},"#1B4417":{"props":{"safety":"first aid"}},"#336633":{"props":{"service":"atm"}},"#E89B00":{"props":{"service":"bike rack"}},"#1E1408":{"props":{"service":"changing station"}},"#02F8A7":{"props":{"service":"flight monitor"}},"#0F3549":{"props":{"service":"locker"}},"#184114":{"props":{"service":"luggage cart"}},"#F1E997":{"props":{"service":"mail"}},"#174013":{"props":{"service":"massage chair"}},"#88A1B5":{"props":{"service":"power"}},"#F3EB99":{"props":{"service":"showers"}},"#010202":{"props":{"service":"stroller"}},"#F6EE9C":{"props":{"service":"telephone"}},"#10390C":{"props":{"service":"tv"}},"#0E2D0A":{"props":{"service":"vending machine"}},"#1A4316":{"props":{"service":"wifi"}},"#123B0E":{"props":{"sign":"stop sign"}},"#113A0D":{"props":{"signal":"traffic light"}},"#E5E5E5":{"props":{"structure":"building","$style":"Background"}},"#EAF1DE":{"props":{"structure":"building","use":"library"}},"#676767":{"props":{"structure":"building"}},"#777777":{"props":{"structure":"parking structure"}},"#6C6C6C":{"props":{"structure":"subbuilding"}},"#A0B0D0":{"props":{"structure":"tent"}},"#1F481B":{"props":{"traffic":"crosswalk"}},"#999999":{"props":{"traffic":"parking lot"}},"#1E471A":{"props":{"furnishing":"poker table"}},"#C0C0C0":{"props":{"traffic":"parking spot"}},"#C0C0A0":{"props":{"traffic":"railway rail"}},"#C0C0D0":{"props":{"traffic":"railway tie"}},"#C0C0B0":{"props":{"traffic":"railway"}},"#000000":{"props":{"traffic":"road"},"doLinearArea":"true"},"#7896BA":{"props":{"traffic":"walkway","covered":"true"}},"#C0C0C2":{"props":{"traffic":"walkway"}},"#CC6666":{"props":{"transit":"bus"}},"#0F381B":{"props":{"transit":"ground transportation"}},"#DDDD66":{"props":{"transit":"taxi"}},"#993333":{"props":{"transit":"train"}},"#DBBFA1":{"props":{"vegetation":"earth"}},"#40D040":{"props":{"vegetation":"garden"}},"#80C080":{"props":{"vegetation":"grass"}},"#75923C":{"props":{"vegetation":"greenery"}},"#33CC33":{"props":{"vegetation":"tree"}},"#A4AAB2":{"props":{"vehicle":"airplane"}},"#3D72E0":{"props":{"water":"true"}},"#2276AF":{"props":{"marker":"parking"}},"#6BB56B":{"props":{"service":"atm","currency":"general"}},"#356335":{"props":{"service":"atm","currency":"yen"}},"#D8D08F":{"props":{"equipment":"cash register"}},"#25261E":{"props":{"facility":"unit","class":"ticketing, check-in"}},"#BCCCCE":{"props":{"facility":"hall area"}},"#C13030":{"props":{"facility":"stairwell"}},"#85CCFF":{"props":{"facility":"room","use":"conference room"}},"#B0A0A1":{"props":{"facility":"room","use":"lobby"}},"#306B8B":{"props":{"furnishing":"seat","disabled access":"true"}},"#30A0A3":{"props":{"furnishing":"seat"}},"#B1":{"props":{"facility":"ramp","disabled access":"true"}},"#48":{"props":{"service":"valet parking"}},"#10":{"props":{"safety":"eyewash"}},"#12":{"props":{"safety":"fire pull"}},"#14":{"props":{"facility":"unit","class":"fitness center"}},"#24":{"props":{"facility":"room","class":"medical"}},"#25":{"props":{"facility":"unit","class":"medical"}},"#26":{"props":{"area":"meeting point"}},"#33":{"props":{"facility":"unit","use":"police/security"}},"#51":{"props":{"sign":"yield sign"}},"#A2":{"props":{"service":"atm","currency":"dollar"}},"#A4":{"props":{"facility":"bathroom","disabled access":"true"}},"#A6":{"props":{"area":"customs"}},"#A7":{"props":{"safety":"fire hose"}},"#A8":{"props":{"service":"santa"}},"#A9":{"props":{"traffic":"parking lot","paid":"true"}},"#A0":{"props":{"area":"passport control"}},"#AABBAA":{"props":{"meta":"coordinates","publish":"true","ref":"sears","units":"ft","xscale":"80","yscale":"80"}},"#AADDAA":{"props":{"facility":"bathroom","gender":"unisex"}},"#20A020":{"props":{"fixture":"tee-mat"}},"#20A585":{"props":{"equipment":"aperio hub"}},"#C8CCC6":{"props":{"equipment":"security camera"}},"#0E4DDB":{"props":{"equipment":"siren"}},"#238099":{"props":{"equipment":"alarm contact"}},"#6688CC":{"props":{"equipment":"bmz"}},"#11CC11":{"props":{"equipment":"card reader"}},"#F99DC9":{"props":{"equipment":"door guard"}},"#535454":{"props":{"equipment":"server"}},"#2A3233":{"props":{"equipment":"rack"}},"#3B95EE":{"props":{"equipment":"cage"}},"#7C7C7C":{"props":{"equipment":"true"}},"#1515AD":{"props":{"traffic":"parking sensor"}},"#4A4ADD":{"props":{"barrier":"turnstile"}},"#2B9999":{"props":{"service":"ticket vending machine"}},"#BCA6A6":{"props":{"fixture":"stall"}},"#9B8663":{"props":{"fixture":"partition"}},"#D9DADB":{"props":{"facility":"landing area"}},"#E8E8E8":{"props":{"facility":"foyer"}},"#C3D3F3":{"props":{"area":"zone"}},"#4C5C6C":{"props":{"area":"plot"}},"#8CCC00":{"props":{"equipment":"air-conditioner"}},"#2C8C89":{"props":{"fixture":"pallet"}},"#E2C262":{"props":{"facility":"electric panel"}},"#FCFAFA":{"props":{"fixture":"glazing"}},"#297C7A":{"props":{"furnishing":"countertop"}},"#A2C2CC":{"props":{"fixture":"cubicle"}},"#F9CB7A":{"props":{"equipment":"turbine"}},"#DDDD09":{"props":{"equipment":"lights"}},"#C6C0A7":{"props":{"facility":"hitting bay"}},"#C9BCBC":{"props":{"equipment":"crah"}},"#B6CECC":{"props":{"equipment":"pdu"}},"#80F980":{"props":{"furnishing":"soccer table"}},"#0186FF":{"props":{"equipment":"beacon"}},"#F08F2C":{"props":{"equipment":"beacon"}},"#0E8632":{"props":{"equipment":"beacon"}},"#95B0C1":{"props":{"service":"seat power"}},"#7182BC":{"props":{"furnishing":"seat","type":"polaris"}},"#A8A8EF":{"props":{"furnishing":"seat","type":"economy plus"}},"#ABBDED":{"props":{"furnishing":"seat","type":"economy"}},"#2B90CF":{"props":{"facility":"room","use":"closet"}},"#66CCFF":{"props":{"facility":"cafe"}},"#FFB6B6":{"props":{"facility":"closet"}},"#D4D4D6":{"props":{"facility":"communications"}},"#A4C0FF":{"props":{"facility":"company store"}},"#F9EBB4":{"props":{"facility":"mail room"}},"#F5FFBB":{"props":{"facility":"copy room"}},"#9FE8FF":{"props":{"facility":"credit union"}},"#909694":{"props":{"facility":"data center"}},"#84BDCE":{"props":{"facility":"ecafe"}},"#CCCFBC":{"props":{"facility":"electrical"}},"#FFFFFF":{"props":{"facility":"equipment space"}},"#E1FFBB":{"props":{"facility":"file area"}},"#FFCCF1":{"props":{"facility":"formal collaboration space"}},"#A4BBC1":{"props":{"facility":"fitness room"}},"#A6CEFF":{"props":{"facility":"hoteling"}},"#ECCAFC":{"props":{"facility":"informal meeting area"}},"#CFDAFF":{"props":{"facility":"interview room"}},"#CDDB9D":{"props":{"facility":"janitors closet"}},"#CCFFBB":{"props":{"facility":"kitchen"}},"#F2DDC9":{"props":{"facility":"large workstation"}},"#EDEDCA":{"props":{"facility":"library"}},"#AEB5CC":{"props":{"facility":"lobby"}},"#F9CADE":{"props":{"facility":"lounge seating"}},"#DDE1ED":{"props":{"facility":"main lobby"}},"#AFAFAF":{"props":{"facility":"mechanical"}},"#B4D8E7":{"props":{"facility":"meeting room"}},"#A9FFF7":{"props":{"facility":"mothers room"}},"#E0C6A0":{"props":{"facility":"multipurpose room"}},"#DCF0F7":{"props":{"facility":"office a"}},"#CDBBFF":{"props":{"facility":"project space"}},"#FFD3BD":{"props":{"facility":"reception"}},"#FFD7D7":{"props":{"facility":"security desk"}},"#EDCEB2":{"props":{"facility":"small workstation"}},"#E2AFC7":{"props":{"facility":"soft seating area"}},"#C9A798":{"props":{"facility":"storage"}},"#A0DCEA":{"props":{"facility":"video conference"}},"#C7EAE6":{"props":{"facility":"training"}},"#6F6F9B":{"props":{"area":"seating"}},"#308899":{"props":{"furnishing":"chair"}},"#80BABA":{"props":{"furnishing":"bench"}},"#66D1AA":{"props":{"equipment":"refrigerator"}},"#55CC99":{"props":{"fixture":"urinal"}},"#BCE6DA":{"props":{"fixture":"sink"}},"#3EFF3E":{"props":{"equipment":"sensor"}},"#474747":{"props":{"equipment":"gateway"}},"#84FCFC":{"props":{"fixture":"lighting2x4"}},"#181191":{"props":{"facility":"ramp"}},"#18772A":{"props":{"marker":"underground parking"}},"#5C3C2C":{"props":{"equipment":"soda machine"}},"#A0A0A0":{"props":{"facility":"quiet room"}},"#36A9E0":{"props":{"equipment":"stair climber"}},"#94C11E":{"props":{"equipment":"elliptical"}},"#28587C":{"props":{"equipment":"recumbent bicycle"}},"#BD8D45":{"props":{"equipment":"treadmill"}},"#F4D77A":{"props":{"equipment":"maintenance"}},"#919DA8":{"props":{"equipment":"rtu"}},"#232B33":{"props":{"equipment":"tv"}},"#424242":{"props":{"furnishing":"disabled chair"}},"#FFCA6C":{"props":{"fixture":"light"}},"#B8B8BC":{"props":{"fixture":"pipe"}},"#909190":{"props":{"fixture":"connector"}},"#6B2929":{"props":{"furnishing":"blackjack table"}},"#365484":{"props":{"furnishing":"slot machine"}},"#2C2C2D":{"props":{"facility":"wiring"}},"#141092":{"props":{"facility":"custodian janitor"}},"#B2A8A8":{"props":{"furnishing":"bed"}},"#EFAE13":{"props":{"equipment":"bench"}},"#C1BB80":{"props":{"fixture":"game room"}},"#181989":{"props":{"facility":"break room"}},"#01BCB0":{"props":{"furnishing":"ping pong table"}},"#838FC2":{"props":{"furnishing":"pool table"}},"#AA7E7E":{"props":{"fixture":"toilet"}},"#6ABCDF":{"props":{"fixture":"tray"}},"#9ABCDF":{"props":{"fixture":"plate"}},"#603813":{"props":{"equipment":"squat bench"}},"#783FFF":{"props":{"equipment":"abs"}},"#EE4036":{"props":{"equipment":"arms"}},"#90278E":{"props":{"equipment":"back"}},"#00ADEE":{"props":{"equipment":"legs"}},"#EFB11D":{"props":{"equipment":"row"}},"#7CAFD1":{"props":{"furnishing":"cabinet"}},"#EDEDED":{"props":{"fixture":"metal partition"}},"#1C2C3C":{"props":{"facility":"room","use":"gym"}},"#AAACC1":{"props":{"facility":"club area"}},"#AAACC2":{"props":{"facility":"concourse section"}},"#AAACC3":{"props":{"facility":"employee area"}},"#AAACC4":{"props":{"facility":"food and beverage area"}},"#AAACC5":{"props":{"facility":"media area"}},"#AAACC6":{"props":{"facility":"team area"}},"#AAACC7":{"props":{"facility":"seating section"}},"#AAACC8":{"props":{"facility":"suite"}},"#88A4EA":{"props":{"facility":"office"}},"#BBCCFF":{"props":{"facility":"conference room"}}},"description":""}},"entryList":{"name":"entryList","type":"apogee.JsonTable","updateData":{"data":["section","entry_parent","entry_type","entry_value","entry_data"],"description":""}},"preliminaryEntryFormat":{"name":"preliminaryEntryFormat","type":"apogee.JsonTable","updateData":{"data":["parentPath","type","value","entry_data"],"description":""}},"preliminaryEntryList":{"name":"preliminaryEntryList","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return readPreliminaryEntries[fileType](inputFile,optionName);","supplementalCode":"","description":""}},"fileType":{"name":"fileType","type":"apogee.JsonTable","updateData":{"data":"inputColors","description":""}},"readPreliminaryEntries":{"name":"readPreliminaryEntries","type":"apogee.Folder","children":{"theme":{"name":"theme","type":"apogee.FunctionTable","updateData":{"argList":["metaFile","optionName"],"functionBody":"var output = [];\n\nvar iurl = metaFile.iurl;\n\nfor(var sectionTag in themeSectionMap) {\n    var section = metaFile[sectionTag];\n    var sectionValue = themeSectionMap[sectionTag];\n    if(section) {\n        for(var key in section) {\n            var data = section[key];\n            \n            if((iurl)&&(sectionTag == \"i\")) {\n                data = getIconData(data,iurl);\n            }\n            \n            var entry = {};\n            entry.section = sectionValue;\n            entry.entry_value = key;\n            entry.entry_data = data;\n            entry.option_name = optionName;\n            output.push(entry);\n        }\n    }\n}\n\nreturn output;","supplementalCode":"function getIconData(data,iurl) {\n    var outData = apogee.util.deepJsonCopy(data);\n    if(data.rurl) {\n        outData.url = iurl + data.rurl;\n        delete outData.rurl;\n    }\n    return outData;\n}","description":""}},"themeSectionMap":{"name":"themeSectionMap","type":"apogee.JsonTable","updateData":{"data":{"s":["style"],"m":["marker"],"i":["icon"],"l":["labelStyle"]},"description":""}},"themeMap":{"name":"themeMap","type":"apogee.FunctionTable","updateData":{"argList":["metaFile","optionName"],"functionBody":"var output = [];\n\nvar labelSectionValue = [\"label\"];\nvar labelSection = metaFile.label;\naddEntries(optionName,labelSectionValue,labelSection,loadLabelEntryData,output);\n\nvar styleSectionValue = [\"style\"];\nvar styleSection = metaFile.style;\naddEntries(optionName,styleSectionValue,styleSection,loadStyleEntryData,output);\n\nreturn output;","supplementalCode":"function addEntries(optionName,sectionValue,section,entryDataLoader,output) {\n    \n    var prioritySection;\n    var priority;\n    var fixedData;\n    \n    for(var i = 0; i < section.length; i++) {\n        prioritySection = section[i];\n        priority = prioritySection.priority;\n        \n        fixedData = {};\n        fixedData.loadEntryData = entryDataLoader;\n        fixedData.optionName = optionName;\n        fixedData.sectionValue = sectionValue;\n        fixedData.insertionInfo = {\"priority\":priority};\n        \n        var parentRef = null;\n        \n        var keyList = prioritySection.ks;\n        if(keyList) {\n            addEntriesFromKeyList(keyList,parentRef,fixedData,output);\n        }\n    }\n    \n    //on the last priority section, check for a default\n    var entryData = entryDataLoader(prioritySection);\n    \n    if(entryData) {\n        addDefaultEntry(entryData,fixedData,output);\n    }\n    \n}\n\nfunction addEntriesFromKeyList(keyList,parentRef,fixedData,output) {\n    for(var i = 0; i < keyList.length; i++) {\n        var inEntry = keyList[i];\n        addKeyEntry(inEntry,parentRef,fixedData,output);\n    }\n}\n\nfunction addKeyEntry(inEntry,parentRef,fixedData,output) {\n    \n    //get the key type\n    var key;\n    var parentSection;\n    if(inEntry.gk !== undefined) {\n        parentSection = [\"property_trees\",\"geometry\"];\n        key = inEntry.gk;\n    } \n    else if(inEntry.ek !== undefined) {\n        parentSection = [\"property_trees\",\"entity\"];\n        key = inEntry.ek;\n    } \n    else if(inEntry.ak !== undefined) {\n       parentSection = [\"named_keys\",\"address\"];\n        key = inEntry.ak;\n    } \n    \n    \n    //update parent path for this key type  (we are assuming a path will use a single key type!)\n    if(!parentRef) {\n        parentRef = {};\n        parentRef.file = \"presets\";\n        parentRef.section = parentSection;\n        parentRef.path = [];\n    }\n    else {\n        //make sure a child key is in the same tree as the parent - for simplicity only\n        if(parentRef.section[1] != parentSection[1]) {\n            //I don't think we need to support this...\n            throw new Error(\"Theme map entry with different key types! Legal but not yet supported here.\")\n        }\n    }\n    \n    //update the path for the children\n    var localObjectRef = apogee.util.deepJsonCopy(parentRef);\n    localObjectRef.path.push(key);\n    \n    var entryData = fixedData.loadEntryData(inEntry);\n    \n    //only save this entry if there is actually data\n    if(entryData) {\n        var outEntry = {};\n        outEntry.insertionInfo = fixedData.insertionInfo;\n        outEntry.section = fixedData.sectionValue;\n        outEntry.option_name = fixedData.optionName;\n        outEntry.parent_ref = parentRef;\n        outEntry.entry_type = \"key\";\n        outEntry.entry_value = key;\n        outEntry.entry_data = entryData;\n        output.push(outEntry);\n    }\n    \n    //do the children!\n    var valueMap = inEntry.v;\n    if(valueMap) {\n        addEntriesFromValueMap(valueMap,localObjectRef,fixedData,output);\n    }\n}\n\nfunction addEntriesFromValueMap(valueMap,parentRef,fixedData,output) {\n for(var value in valueMap) {\n        var inEntry = valueMap[value];\n        addValueEntry(value,inEntry,parentRef,fixedData,output);\n    }\n}\n\nfunction addValueEntry(value,inEntry,parentRef,fixedData,output) {\n\n    //update the path for the children\n    var localObjectRef = apogee.util.deepJsonCopy(parentRef);\n    localObjectRef.path.push(value);\n    \n    var entryData = fixedData.loadEntryData(inEntry);\n    \n    //only save this entry if there is actually data\n    if(entryData) {\n        var outEntry = {};\n        outEntry.insertionInfo = fixedData.insertionInfo;\n        outEntry.section = fixedData.sectionValue;\n        outEntry.option_name = fixedData.optionName;\n        outEntry.parent_ref = parentRef;\n        outEntry.entry_type = \"value\";\n        outEntry.entry_value = value;\n        outEntry.entry_data = entryData;\n        output.push(outEntry);\n    }\n    \n    //do the children!\n    var keyList = inEntry.ks;\n    if(keyList) {\n        addEntriesFromValueMap(keyList,localObjectRef,fixedData,output);\n    }\n}\n\n\nfunction addDefaultEntry(entryData,fixedData,output) {\n    var outEntry = {};\n    outEntry.insertionInfo = fixedData.insertionInfo;\n    outEntry.section = fixedData.sectionValue;\n    outEntry.option_name = fixedData.fileName;\n    outEntry.entry_type = \"default\";\n    outEntry.entry_value = \"default\";\n    outEntry.entry_data = entryData;\n    output.push(outEntry);\n}\n\nfunction loadLabelEntryData(inEntry) {\n    var data = {}\n    var hasData = false;\n    if(inEntry.r !== undefined) {\n        data.r = inEntry.r;\n        hasData = true;\n    }\n    if(inEntry.lt !== undefined) {\n        data.lt = inEntry.lt;\n        hasData = true;\n    }\n    if(inEntry.trans !== undefined) {\n        data.trans = inEntry.trans;\n        hasData = true;\n    }\n    if(hasData) return data;    \n    else return null;\n}\n\nfunction loadStyleEntryData(inEntry) {\n    if(inEntry.n) {\n        var styleName = inEntry.n;\n        objectRef = {};\n        objectRef.file = \"theme\";\n        objectRef.section = [\"style\"];\n        objectRef.path = [styleName];\n        var data = {};\n        data.styleRef = objectRef;\n        return data;\n    }\n    else {\n        return null;\n    }\n}","description":""}},"strings":{"name":"strings","type":"apogee.FunctionTable","updateData":{"argList":["metaFile","optionName"],"functionBody":"var output = [];\n\nfor(var key in metaFile.translations) {\n    var inEntry = metaFile.translations[key];\n    \n    var parentRef = getParentRefFromKey(key);\n    \n    for(var lang in inEntry) {\n        var translation = inEntry[lang];\n        \n        var outEntry = {};\n        outEntry.section = lang;\n        outEntry.parent_ref = parentRef;\n        outEntry.entry_value = key;\n        outEntry.entry_data = {\"trans\":translation};\n        outEntry.option_name = fileName;\n        output.push(outEntry);\n    }\n}\n\nreturn output;","supplementalCode":"function getParentRefFromKey(key) {\n    var sepChar = key.indexOf(\":\");\n    var keyPrefix = key.substr(0,sepChar);\n    var keySuffix = key.substr(sepChar+1);\n    \n    var objectRef = apogee.util.deepJsonCopy(stringsObjectRefMap[keyPrefix]);\n    objectRef.path.push(keySuffix);\n    return objectRef;\n}","description":""}},"inputColors":{"name":"inputColors","type":"apogee.FunctionTable","updateData":{"argList":["metaFile","optionName"],"functionBody":"var output = [];\n\nfor(var color in metaFile) {\n    var inEntry = metaFile[color];\n    \n    entryData = {};\n    entryData.objectRef = getPresetsObjectRef(inEntry.props);\n    if(inEntry.doLinearArea) {\n        entryData.doLinearArea = true;\n    }\n    \n    var outEntry = {};\n    outEntry.entry_value = color;\n    outEntry.option_name = optionName;\n    outEntry.entry_data = entryData;\n    output.push(outEntry);\n}\n\nreturn output;","supplementalCode":"function getPresetsObjectRef(props) {\n    //I am assuming these are in order and that they give a single object\n    var objectRef = {};\n    objectRef.file = \"presets\";\n    objectRef.section = [\"property_trees\",\"geometry\"];\n    \n    var path = [];\n    for(var key in props) {\n        path.push(key);\n        path.push(props[key]);\n    }\n    objectRef.path = path;\n    \n    return objectRef;\n}\n","description":""}},"presetOverrides":{"name":"presetOverrides","type":"apogee.FunctionTable","updateData":{"argList":["metaFile","optionName"],"functionBody":"var output = [];\n\nvar propTreeEntries = metaFile.entries;\nfor(var i = 0; i < propTreeEntries.length; i++) {\n    var inEntry = propTreeEntries[i];\n    var outEntry = getPropTreeEntry(inEntry,optionName);\n    output.push(outEntry);\n}\n\nvar namedKeyEntries = metaFile.named_keys;\nfor(var namedKey in namedKeyEntries) {\n    var inEntry = namedKeyEntries[namedKey];\n    var outEntry = getNamedKeyEntry(inEntry,optionName);\n    output.push(outEntry);\n}\n\nreturn output;","supplementalCode":"function getPropTreeEntry(inEntry,optionName) {\n    //make sure \"entry\" field is empty\n    if(!isEmpty(inEntry.entry)) {\n        throw new Error(\"Non empty child entry: \" + inEntry.value);\n    }\n    \n    outEntry = {};\n    outEntry.section = [\"property_trees\",inEntry.tree];\n    outEntry.optionName = optionName;\n    outEntry.parentRef = getPropsParentRef(inEntry);\n    outEntry.entry_type = inEntry.type;\n    outEntry.entry_value = inEntry.value;\n    outEntry.entry_data = {};\n    return outEntry;\n}\n\n\nfunction getNamedKeyEntry(inEntry,optionName) {\n    //make sure \"entry\" field is empty\n    if(!isEmpty(inEntry.entry)) {\n        throw new Error(\"Non empty child entry: \" + inEntry.value);\n    }\n    \n    if(inEntry.type == \"key\") {\n        throw new Error(\"Entry type key in named keys. Not supported. \");\n    }\n    \n    outEntry = {};\n    outEntry.section = [\"named_keys\",inEntry.name];\n    outEntry.optionName = optionName;\n    outEntry.parentRef = getNamedKeyParentRef(inEntry);\n    outEntry.entry_type = inEntry.type;\n    outEntry.entry_value = inEntry.value;\n    outEntry.entry_data = {};\n    return outEntry;\n}\n\nfunction getPropsParentRef(inEntry) {\n    var objectRef = {};\n    objectRef.file = \"presets\";\n    objectRef.section = [\"property_trees\",inEntry.tree];\n    objectRef.path = inEntry.path;\n    \n    return objectRef;\n}\n\nfunction getPathPrefix(treeName) {\n    return presetPathPrefixes[treeName];\n}\n\nfunction getNamedKeyParentRef(inEntry) {\n    var objectRef = {};\n    objectRef.file = \"presets\";\n    objectRef.section = [\"property_trees\",inEntry.tree];\n    \n    var path = [inEntry.name];\n    objectRef.path = path;\n    \n    return objectRef;\n}\n\n\nfunction isEmpty(object) {\n    for(var key in object) {\n        return false;\n    }\n    return true;\n}\n\n","description":""}},"presetPathPrefixes":{"name":"presetPathPrefixes","type":"apogee.JsonTable","updateData":{"data":{"communityMap":"cmk","communityEntity":"cek","drawing":"dk","level":"lk","geometry":"gk","entity":"ek","chain":"ck","node":"nk","link":"lnk","address":"ak"},"description":""}},"stringsObjectRefMap":{"name":"stringsObjectRefMap","type":"apogee.JsonTable","updateData":{"data":{"com_type":{"file":"presets","section":["property_trees","community_map"],"path":["com_type"]},"country":{"file":"presets","section":["named_groups","postal address"],"path":["country"]},"state":{"file":"presets","section":["named_groups","postal address"],"path":["country","US"]},"province":{"file":"presets","section":["named_groups","postal address"],"path":["country","CA"]},"prefecture":{"file":"presets","section":["named_groups","postal address"],"path":["country","JP"]},"territory":{"file":"presets","section":["named_groups","postal address"],"path":["country","AU"]},"icon":{"file":"theme","section":["icon"],"path":[]},"lang":{"file":"presets","section":["named_keys","lang"],"path":["lang"]},"map_type":{"file":"presets","section":["property_trees","drawing"],"path":["map_type"]}},"description":""}}}},"optionName":{"name":"optionName","type":"apogee.JsonTable","updateData":{"data":"Factory","description":""}}}}}}},"components":{"inputProcessing":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":75,"y":75}},"children":{"inputFile":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":693,"height":660},"posInfo":{"x":21,"y":111},"state":0,"viewType":"JSON"}},"entryList":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":300},"posInfo":{"x":827,"y":142},"state":-1,"viewType":"Form"}},"preliminaryEntryFormat":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":31},"posInfo":{"x":771,"y":99},"state":-1,"viewType":"Form"}},"preliminaryEntryList":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":789,"height":583},"posInfo":{"x":108,"y":252},"state":0,"viewType":"JSON"}},"fileType":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":328,"height":89},"posInfo":{"x":43,"y":13},"state":0,"viewType":"Text"}},"readPreliminaryEntries":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":825,"y":39}},"children":{"theme":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":552,"height":470},"posInfo":{"x":50,"y":194},"state":-1,"viewType":"Code"}},"themeSectionMap":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":479},"posInfo":{"x":752,"y":7},"state":-1,"viewType":"Form"}},"themeMap":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":832,"height":821},"posInfo":{"x":42,"y":36},"state":-1,"viewType":"Private"}},"strings":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":747,"height":400},"posInfo":{"x":32,"y":255},"state":-1,"viewType":"Private"}},"inputColors":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":626,"height":400},"posInfo":{"x":54,"y":87},"state":-1,"viewType":"Private"}},"presetOverrides":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":770,"height":677},"posInfo":{"x":50,"y":139},"state":-1,"viewType":"Private"}},"presetPathPrefixes":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":545,"height":300},"posInfo":{"x":751,"y":55},"state":-1,"viewType":"Form"}},"stringsObjectRefMap":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":664,"height":590},"posInfo":{"x":754,"y":104},"state":-1,"viewType":"Text"}}}},"optionName":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":85},"posInfo":{"x":402,"y":13},"state":0,"viewType":"Text"}}}}}}