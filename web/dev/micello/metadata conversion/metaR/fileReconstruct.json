{"fileType":"apogee workspace","jsLinks":[],"cssLinks":[],"workspace":{"fileType":"apogee workspace","version":0.2,"data":{"name":"fileReconstruct","type":"apogee.Folder","children":{"taskResults":{"name":"taskResults","type":"apogee.Folder","children":{"loadMetaFileRecords":{"name":"loadMetaFileRecords","type":"apogee.JsonTable","updateData":{"data":{"state":"SUCCESS","data":{"existingMetaFileEntry":{"edit_perm":15,"Type":"meta_file","Fields":{"name":"Factory","file_type_id":7,"file_context":"public"},"edit_ok":true,"read_perm":2,"Id":7},"existingRecipeEntries":[{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1656,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1634},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1657,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1635},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1658,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1636},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1659,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1637},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1660,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1638},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1661,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1639},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1662,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1640},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1663,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1641},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1664,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1642},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1665,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1643},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1666,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1644},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1667,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1645},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1668,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1646},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1669,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1647},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1670,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1648},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1671,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1649},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1672,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1650},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1673,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1651},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1674,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1652},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1675,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1653},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1676,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1654},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1677,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1655},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1678,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1656},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1679,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1657},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1680,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1658},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1681,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1659},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1682,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1660},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1683,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1661},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1684,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1662},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1685,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1663},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1686,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1664},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1687,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1665},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1688,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1666},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1689,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1667},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1690,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1668},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1691,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1669},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1692,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1670},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1693,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1671},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1694,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1672},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1695,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1673},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1696,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1674},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1697,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1675},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1698,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1676},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1699,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1677},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1700,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1678},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1701,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1679},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1702,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1680},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1703,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1681},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1704,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1682},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1705,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1683},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1706,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1684},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1707,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1685},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1708,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1686},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1709,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1687},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1710,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1688},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1711,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1689},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1712,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1690},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1713,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1691},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1714,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1692},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1715,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1693},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1716,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1694},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1717,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1695},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1718,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1696},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1719,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1697},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1720,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1698},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1721,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1699},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1722,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1700},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1723,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1701},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1724,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1702},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1725,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1703},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1726,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1704},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1727,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1705},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1728,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1706},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1729,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1707},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1730,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1708},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1731,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1709},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1732,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1710},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1733,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1711},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1734,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1712},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1735,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1713},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1736,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1714},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1737,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1715},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1738,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1716},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1739,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1717},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1740,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1718},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1741,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1719},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1742,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1720},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1743,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1721},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1744,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1722},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1745,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1723},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1746,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1724},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1747,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1725},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1748,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1726},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1749,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1727},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1750,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1728},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1751,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1729},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1752,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1730},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1753,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1731},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1754,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1732},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1755,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1733},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1756,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1734},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1757,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1735},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1758,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1736},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1759,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1737},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1760,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1738},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1761,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1739},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1762,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1740},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1763,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1741},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1764,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1742},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1765,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1743},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1766,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1744},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1767,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1745},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1768,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1746},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1769,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1747},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1770,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1748},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1771,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1749},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1772,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1750},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1773,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1751},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1774,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1752},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1775,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1753},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1776,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1754},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1777,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1755},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1778,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1756},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1779,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1757},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1780,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1758},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1781,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1759},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1782,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1760},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1783,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1761},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1784,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1762},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1785,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1763},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1786,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1764},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1787,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1765},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1788,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1766},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1789,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1767},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1790,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1768},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1791,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1769},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1792,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1770},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1793,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1771},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1794,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1772},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1795,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1773},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1796,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1774},{"edit_perm":15,"Type":"recipe_entry","Fields":{"ordr":0,"meta_file_id":7,"file_entry_id":1797,"insertion_info":null},"edit_ok":true,"read_perm":2,"Id":1775}],"fileType":"inputColors"}},"description":""}},"login":{"name":"login","type":"apogee.JsonTable","updateData":{"data":{"state":"SUCCESS","data":{"sessionKey":"SESS0f6c4c2238a670b8138b63d9fd03cc22=ojqo1kcp8et6gsibim5b1ko107"}},"description":""}},"loadContext":{"name":"loadContext","type":"apogee.JsonTable","updateData":{"data":{"state":"SUCCESS","data":{"context":"public"}},"description":""}}}},"tasks":{"name":"tasks","type":"apogee.Folder","children":{"login":{"name":"login","type":"apogee.Folder","children":{"loginUrl":{"name":"loginUrl","type":"apogee.JsonTable","updateData":{"data":"http://localhost:8080/TestAuthorization/loginjson","description":""}},"loginControl":{"name":"loginControl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return loginUrl;","supplementalCode":"","description":""}},"sessionResponse":{"name":"sessionResponse","type":"apogee.JsonTable","updateData":{"data":{"sessionKey":"SESS0f6c4c2238a670b8138b63d9fd03cc22=ojqo1kcp8et6gsibim5b1ko107","responseCode":1},"description":""}},"taskResult":{"name":"taskResult","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var output = {};\nvar sessionKey;\nif(!sessionResponse) {\n    output.state = \"INCOMPLETE\";\n}\nelse if(sessionResponse.responseCode === 1) {\n    output.state = \"SUCCESS\";\n    data = {};\n    data.sessionKey = sessionResponse.sessionKey;\n    output.data = data;\n}\nelse {\n    output.status = \"ERROR\";\n    output.msg = sessionResponse.message;\n\n}\n\napogeeMessenger.dataUpdate(\"taskResults.login\",output);\n    \nreturn output;","supplementalCode":"","description":""}}}},"loadMetaFileRecords":{"name":"loadMetaFileRecords","type":"apogee.Folder","children":{"fileTypeList":{"name":"fileTypeList","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(!sessionKey) return null;\n\nvar fileTypeSearch = {};\nfileTypeSearch.search = \"file_type_list\";\n\nreturn micemetarDataAccess.getRequestPromise(fileTypeSearch,sessionKey);\n\n","supplementalCode":"","description":""}},"fileTypeEntryList":{"name":"fileTypeEntryList","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(!sessionKey) return null;\n\nvar fileTypeId = existingMetaFileEntry.Fields.file_type_id;\n\nvar searchDef = {};\nsearchDef.search = \"file_type_entries\";\nsearchDef.id = fileTypeId;\n\nreturn micemetarDataAccess.getRequestPromise(searchDef,sessionKey);\n\n","supplementalCode":"","description":""}},"recordStore":{"name":"recordStore","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var map = {};\n\naddSearchResponse(fileTypeList,map);\naddSearchResponse(fileTypeEntryList,map);\naddSearchResponse(metaFileList,map);\naddSearchResponse(metaFileResponse,map);\n\nreturn map;\n\n","supplementalCode":"function addSearchResponse(searchResponse,outputMap) {\n    if(!searchResponse) {\n        return;\n    }\n    \n    if(!searchResponse.success) {\n        throw new Error(\"Error in loading record data: \" + searchResponse.msg);\n    }\n    \n    var searchResponseData = searchResponse.data;\n    \n    if(searchResponseData.Response) {\n        addRecordList(searchResponseData.Response,outputMap);\n    }\n    if(searchResponseData.Records) {\n        addRecordList(searchResponseData.Records,outputMap);\n    }\n    \n}\n\nfunction addRecordList(recordList,outputMap) {\n    for(var i = 0; i < recordList.length; i++) {\n        var record = recordList[i];\n        \n        var typeSection = outputMap[record.Type];\n        if(!typeSection) {\n            typeSection = {};\n            outputMap[record.Type] = typeSection;\n        }\n        \n        //if there is already a record, just overwrite it. They should be the same.\n        typeSection[record.Id] = record;\n    }\n}","description":""}},"metaFileResponse":{"name":"metaFileResponse","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(!sessionKey) return null;\nif(!selectedMetaFileId) return null;\n\nvar searchDef = {};\nsearchDef.search = \"meta_file\";\nsearchDef.id = selectedMetaFileId;\nreturn micemetarDataAccess.getRequestPromise(searchDef,sessionKey);\n\n\n\n\n\n\n","supplementalCode":"","description":""}},"metaFileList":{"name":"metaFileList","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(!sessionKey) return null;\nif(!context) return null;\n\n\nvar searchDef = {};\nsearchDef.search = \"meta_file_list\";\nsearchDef.file_context = context;\n\nreturn micemetarDataAccess.getRequestPromise(searchDef,sessionKey);\n\n","supplementalCode":"","description":""}},"getRecord":{"name":"getRecord","type":"apogee.FunctionTable","updateData":{"argList":["recordType","recordId"],"functionBody":"typeSection = recordStore[recordType];\nif(!typeSection) {\n    throw new Error(\"Type not found!\");\n}\n\nreturn typeSection[recordId];\n","supplementalCode":"","description":""}},"metaFileSelector":{"name":"metaFileSelector","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var output = {};\n\nif((metaFileList)&&(metaFileList.success)) {\n    var metaFiles = {};\n    output.metaFiles = metaFiles;\n    \n    var metaFileRecords = metaFileList.data.Response;\n    for(var i = 0; i < metaFileRecords.length; i++) {\n        var record = metaFileRecords[i];\n        var fileTypeRecord = getRecord(\"file_type\",record.Fields.file_type_id);\n        var fileType = fileTypeRecord.Fields.file_type_name;\n        var metaName = record.Fields.name;\n        metaFiles[fileType + \":\" + metaName] = record.Id;\n    }\n}\n\noutput.currentMetaFileId = metaFileId;\n\nreturn output;","supplementalCode":"","description":""}},"INVALID_ID":{"name":"INVALID_ID","type":"apogee.JsonTable","updateData":{"data":0,"description":""}},"availableFileEntries":{"name":"availableFileEntries","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var output = {};\n\nvar recordStore = loadMetaFileRecords.recordStore;\nfor(var idString in recordStore.file_entry) {\n    var fileEntry = recordStore.file_entry[idString];\n    var fileTypeEntry = loadMetaFileRecords.getRecord(\"file_entry_type\",fileEntry.Fields.file_entry_type_id);\n    var entry = {};\n    entry.fileEntry = fileEntry;\n    entry.fileTypeEntry = fileTypeEntry;\n    entry.recipeEntry = existingRecipeEntries[idString];\n    output[idString] = entry;\n}\n\nreturn output;","supplementalCode":"","description":""}},"existingMetaFileEntry":{"name":"existingMetaFileEntry","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(!loadMetaFileRecords.metaFileResponse) {\n    return false;\n}\n\nif(!loadMetaFileRecords.metaFileResponse.success) {\n    throw new Error(\"Meta File request error\");\n}\n\nif(loadMetaFileRecords.metaFileResponse.data.Response.length === 0) {\n    throw new Error(\"Meta file not found\");\n}\n\nreturn loadMetaFileRecords.metaFileResponse.data.Response[0];","supplementalCode":"","description":""}},"existingRecipeEntries":{"name":"existingRecipeEntries","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var output = {};\n\nif(!metaFileResponse) {\n    return output;\n}\n\nif(!metaFileResponse.success) {\n    throw new Error(\"Error loading meta file records: \" + loadMetaFileRecords.meatFileResponse.msg);\n}\n\nreturn metaFileResponse.data.Records;\n\n// var metaFileRecords = metaFileResponse.data.Records;\n\n// for(var i = 0; i < metaFileRecords.length; i++) {\n//     var record = metaFileRecords[i];\n//     if(record.Type == \"recipe_entry\") {\n//         output[record.Fields.file_entry_id] = record;\n//     }\n// }\n\n// return output;","supplementalCode":"","description":""}},"storeDataFlag":{"name":"storeDataFlag","type":"apogee.JsonTable","updateData":{"data":false,"description":""}},"taskResult":{"name":"taskResult","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var output = {};\n\nif(!dataLoadSuccess) {\n    output.state = \"INCOMPLETE\";\n}\nelse if(dataLoadSuccess.success === true) {\n    output.state = \"SUCCESS\";\n    data = {};\n    data.existingMetaFileEntry = existingMetaFileEntry;\n    data.existingRecipeEntries = existingRecipeEntries;\n    data.fileType = fileType;\n    output.data = data;\n}\nelse if(dataLoadErrors.success === false) {\n    output.state = \"ERROR\";\n    output.msg = dataLoadErrors.msg;\n}\n\nif(storeDataFlag) {\n    var updateInfo = [];\n    updateInfo.push([\"taskResults.loadMetaFileRecords\",output]);\n    updateInfo.push([\"storeDataFlag\",false]);\n    apogeeMessenger.compoundDataUpdate(updateInfo);\n}\n\nreturn output;\n\n","supplementalCode":"","description":""}},"dataLoadSuccess":{"name":"dataLoadSuccess","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if((!fileTypeList)&&(!metaFileList)) {\n    return null;\n}\n\nvar output = {};\n\nerrors = [];\nif(fileTypeEntryList.success !== true) {\n    errors.push(fileTypeEntryList.msg);\n}\nif(metaFileList.success !== true) {\n    errors.push(metaFileResponse.msg);\n}\n\nif(errors.length > 0) {\n    output.success = false;\n    output.msg = errors.join(\"; \");\n}\nelse {\n    output.success = true;\n}\n\nreturn output;","supplementalCode":"","description":""}},"context":{"name":"context","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(taskResults.loadContext.state == \"SUCCESS\") {\n    return taskResults.loadContext.data.context;\n}\nelse {\n    return null;\n}","supplementalCode":"","description":""}},"sessionKey":{"name":"sessionKey","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if(taskResults.login.state == \"SUCCESS\") {\n    return taskResults.login.data.sessionKey;\n}\nelse {\n    return null;\n}","supplementalCode":"","description":""}},"selectedMetaFileId":{"name":"selectedMetaFileId","type":"apogee.JsonTable","updateData":{"data":7,"description":""}},"fileType":{"name":"fileType","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var fileTypeRecord = getRecord(\"file_type\",existingMetaFileEntry.Fields.file_type_id);\nif(fileTypeRecord) {\n    return fileTypeRecord.Fields.file_type_name;\n}\nelse {\n    return INVALID_ID;\n}","supplementalCode":"","description":""}}}},"loadContext":{"name":"loadContext","type":"apogee.Folder","children":{"contextControl":{"name":"contextControl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return null;","supplementalCode":"","description":""}}}},"fileReconstruct":{"name":"fileReconstruct","type":"apogee.Folder","children":{"createRecordStructure":{"name":"createRecordStructure","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if((!taskResults.loadMetaFileRecords)||(taskResults.loadMetaFileRecords.state != \"SUCCESS\")) return null;\n\nvar output = {};\noutput.metaFile = taskResults.loadMetaFileRecords.data.existingMetaFileEntry;\n\nvar entryList = [];\noutput.entryList = entryList;\n\nvar recipeList = taskResults.loadMetaFileRecords.data.existingRecipeEntries;\nfor(var i = 0; i < recipeList.length; i++) {\n    var recipeRecord = recipeList[i];\n    \n    var fileEntryId = recipeRecord.Fields.file_entry_id;\n    var fileEntryRecord = tasks.loadMetaFileRecords.getRecord(\"file_entry\",fileEntryId);\n    \n    var fileEntryTypeId = fileEntryRecord.Fields.file_entry_type_id;\n    var fileEntryTypeRecord = tasks.loadMetaFileRecords.getRecord(\"file_entry_type\",fileEntryTypeId);\n\n    var combinedEntry = {};\n    combinedEntry.fileEntryType = fileEntryTypeRecord;\n    combinedEntry.fileEntry = fileEntryRecord;\n    combinedEntry.recipeEntry = recipeRecord;\n    entryList.push(combinedEntry);\n}\n\nreturn output;\n\n\n","supplementalCode":"","description":""}},"newFile":{"name":"newFile","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return reconstructFile(fileType,createRecordStructure);","supplementalCode":"","description":""}},"reconstruct":{"name":"reconstruct","type":"apogee.Folder","children":{"presets":{"name":"presets","type":"apogee.Folder","children":{"processEntry":{"name":"processEntry","type":"apogee.FunctionTable","updateData":{"argList":["output","metaFile","recipeEntry","fileEntry","fileEntryType","workingData"],"functionBody":"//----------------\n//load the section\n//----------------\nvar sectionValue = fileEntryType.Fields.section;\n\nvar majorSection = output[sectionValue[0]];\nif(!majorSection) {\n    majorSection = {};\n    output[sectionValue[0]] = majorSection;\n}\n\nvar minorSection = majorSection[sectionValue[1]];\nif(!minorSection) {\n    minorSection = [];\n    majorSection[sectionValue[1]] = minorSection;\n}\n\n//------------------------\n//create this preset entry\n//------------------------\nvar presetEntry = {};\nvar path;\n\nvar entryData = fileEntry.Fields.entry_data;\n\nvar parentPresetEntry = null;\nvar parentFileEntryTypeId = fileEntryType.Fields.entry_parent_id;\nif(parentFileEntryTypeId) {\n    var parentPresetEntry = getPresetEntry(workingData,sectionValue,parentFileEntryTypeId);\n    if(!parentPresetEntry) {\n        //throw new Error(\"parent entry not found!: \" + JSON.stringify(parentPath));\n        console.log(\"parent entry not found!: \" + JSON.stringify(parentPath));\n        return;\n    }\n}\n\nif(fileEntryType.Fields.entry_type == \"key\") {\n    //add any added entry fields\n    presetEntry.k = fileEntryType.Fields.entry_value;\n    presetEntry.input = entryData.input;\n    if(entryData.desc) presetEntry.desc = entryData.desc;\n    if(entryData.required) presetEntry.required = entryData.required;\n    if(entryData.is_array) presetEntry.is_array = entryData.is_array;\n    if(entryData.has_lang) presetEntry.has_lang = entryData.has_lang;\n    if(entryData.prop) presetEntry.prop = entryData.prop;\n    \n    //add the entry to the parent or the base of the section\n    if(parentPresetEntry) {\n        addKeyToParentPresetEntry(parentPresetEntry,presetEntry);\n    }\n    else {\n        minorSection.push(presetEntry);\n    }\n}\nelse {\n    var value = fileEntryType.Fields.entry_value;\n    \n    //add any added entry fields\n    if(entryData.desc) presetEntry.desc = entryData.desc;\n    \n    //add the entry to the parent\n    addValueToParentPresetEntry(parentPresetEntry,presetEntry,value);\n}\n\nstorePresetEntry(workingData,sectionValue,fileEntryType.Id,presetEntry);\n","supplementalCode":"function getPresetEntry(workingData,section,fileEntryTypeId) {\r\n    return workingData.storedEntries[fileEntryTypeId];\r\n}\r\n\r\n\r\nfunction storePresetEntry(workingData,section,fileEntryTypeId,entry) {\r\n    workingData.storedEntries[fileEntryTypeId] = entry;\r\n}\r\n\r\nfunction addKeyToParentPresetEntry(parentPresetEntry,presetEntry) {\r\n    var keyList = parentPresetEntry.ks;\r\n    if(!keyList) {\r\n        keyList = [];\r\n        parentPresetEntry.ks = keyList;\r\n    }\r\n    keyList.push(presetEntry);\r\n}\r\n\r\nfunction addValueToParentPresetEntry(parentPresetEntry,presetEntry,value) {\r\n    var valueSet = parentPresetEntry.v;\r\n    if(!valueSet) {\r\n        valueSet = {};\r\n        parentPresetEntry.v = valueSet;\r\n    }\r\n    valueSet[value] = presetEntry;\r\n}","description":""}},"postProcessFile":{"name":"postProcessFile","type":"apogee.FunctionTable","updateData":{"argList":["outFile","workingData"],"functionBody":"//we need to convert the named keys to a single object each rather than a list \n//and we should enforce that they only have one entry.\nfor(var namedKey in outFile.named_keys) {\n    var namedKeyEntry = outFile.named_keys[namedKey];\n    if(namedKeyEntry.length > 1) {\n        throw new Error(\"named key has mulitipl entries!\");\n    }\n    outFile.named_keys[namedKey] = namedKeyEntry[0];\n}","supplementalCode":"","description":""}},"initialize":{"name":"initialize","type":"apogee.FunctionTable","updateData":{"argList":["outFile"],"functionBody":"return {\"storedEntries\":{}};","supplementalCode":"","description":""}}}},"themeMap":{"name":"themeMap","type":"apogee.Folder","children":{"initialize":{"name":"initialize","type":"apogee.FunctionTable","updateData":{"argList":["output"],"functionBody":"var workingData = {};\nworkingData.storedEntries = {};\nworkingData.sectionMap = {};\n\nreturn workingData;","supplementalCode":"","description":""}},"processEntry":{"name":"processEntry","type":"apogee.FunctionTable","updateData":{"argList":["output","metaFile","recipeEntry","fileEntry","fileEntryType","workingData"],"functionBody":"//----------------\n//load the section\n//----------------\nvar priority = recipeEntry.Fields.insertion_info.priority;\nvar sectionName = fileEntryType.Fields.section[0];\n\nvar workingSection = workingData.sectionMap[sectionName];\nif(!workingSection) {\n    workingSection = {};\n    workingData.sectionMap[sectionName] = workingSection;\n}\n\nvar prioritySection = workingSection[priority];\nif(!prioritySection) {\n    prioritySection = {};\n    prioritySection.priority = priority;\n    prioritySection.ks = [];\n    workingSection[priority] = prioritySection;\n}\n\n//------------------------\n//create this themeMap entry\n//------------------------\n\nvar entryData = fileEntry.Fields.entry_data;\n\nif(fileEntryType.Fields.entry_type == \"default\") {\n    //non theme entry - default entry\n    addPayload(entryData,prioritySection);\n}\nelse {\n    //normal key or value entry\n    var themeMapEntry = {};\n    \n    var parentThemeMapEntry = null;\n    var parentFileEntryTypeId = fileEntryType.Fields.entry_parent_id;\n    if(parentFileEntryTypeId) {\n        var parentThemeMapEntry = getThemeMapEntry(workingData,sectionName,priority,parentFileEntryTypeId);\n        if(!parentThemeMapEntry) {\n            //throw new Error(\"parent entry not found!: \" + sectionName + \":\" + priority + \":\" + parentFileEntryTypeId);\n            console.log(\"parent entry not found!: \" + sectionName + \":\" + priority + \":\" + parentFileEntryTypeId);\n            return;\n        }\n    }\n    \n    if(fileEntryType.Fields.entry_type == \"value\") {\n        //value entry\n        var value = fileEntryType.Fields.entry_value;\n        addValueToParentThemeMapEntry(parentThemeMapEntry,themeMapEntry,value);\n    }\n    else {\n        //key entry\n        \n        //add the key\n        themeMapEntry[fileEntryType.Fields.entry_type] = fileEntryType.Fields.entry_value;\n\n        //add the entry to the parent or the base of the section\n        if(parentThemeMapEntry) {\n            addKeyToParentThemeMapEntry(parentThemeMapEntry,themeMapEntry);\n        }\n        else {\n            prioritySection.ks.push(themeMapEntry);\n        }\n    }\n    \n    addPayload(entryData,themeMapEntry);\n    \n    storeThemeMapEntry(workingData,sectionName,priority,fileEntryType.Id,themeMapEntry);\n}\n","supplementalCode":"function getThemeMapEntry(workingData,sectionName,priority,fileEntryTypeId) {\r\n    var lookupKey = getLookupKey(sectionName,priority,fileEntryTypeId);\r\n    return workingData.storedEntries[lookupKey];\r\n}\r\n\r\nfunction storeThemeMapEntry(workingData,sectionName,priority,fileEntryTypeId,entry) {\r\n    var lookupKey = getLookupKey(sectionName,priority,fileEntryTypeId);\r\n    workingData.storedEntries[lookupKey] = entry;\r\n}\r\n\r\nfunction getLookupKey(sectionName,priority,fileEntryTypeId) {\r\n    return sectionName + \"|\" + priority + \"|\" + fileEntryTypeId;\r\n}\r\n\r\nfunction addKeyToParentThemeMapEntry(parentThemeMapEntry,themeMapEntry) {\r\n    var keyList = parentThemeMapEntry.ks;\r\n    if(!keyList) {\r\n        keyList = [];\r\n        parentThemeMapEntry.ks = keyList;\r\n    }\r\n    keyList.push(themeMapEntry);\r\n}\r\n\r\nfunction addValueToParentThemeMapEntry(parentThemeMapEntry,themeMapEntry,value) {\r\n    var valueSet = parentThemeMapEntry.v;\r\n    if(!valueSet) {\r\n        valueSet = {};\r\n        parentThemeMapEntry.v = valueSet;\r\n    }\r\n    valueSet[value] = themeMapEntry;\r\n}\r\n\r\nfunction addPayload(entryData,themeMapEntry) {\r\n    for(var key in entryData) {\r\n        themeMapEntry[key] = entryData[key];\r\n    }\r\n}","description":""}},"postProcessFile":{"name":"postProcessFile","type":"apogee.FunctionTable","updateData":{"argList":["outFile","workingData"],"functionBody":"outFile.ft = \"ThemeMap\";\n\nfor(var sectionName in workingData.sectionMap) {\n    var sectionArray = [];\n    outFile[sectionName] = sectionArray;\n    \n    var priorityMap = workingData.sectionMap[sectionName];\n    for(var priorityString in priorityMap) {\n        sectionArray.push(priorityMap[priorityString]);\n    }\n}\n","supplementalCode":"","description":""}}}},"theme":{"name":"theme","type":"apogee.Folder","children":{"initialize":{"name":"initialize","type":"apogee.FunctionTable","updateData":{"argList":["outFile"],"functionBody":"return {\"iurl\":null};","supplementalCode":"","description":""}},"processEntry":{"name":"processEntry","type":"apogee.FunctionTable","updateData":{"argList":["output","metaFile","recipeEntry","fileEntry","fileEntryType","workingData"],"functionBody":" \r\n//load the theme section\r\nvar themeSectionName = fileEntryType.Fields.section[0];\r\nvar themeSectionLabel = sectionMap[themeSectionName];\r\n\r\nvar themeSection = output[themeSectionLabel];\r\nif(themeSection === undefined) {\r\n    themeSection = {};\r\n    output[themeSectionLabel] = themeSection;\r\n}\r\n\r\nvar entryData = fileEntry.Fields.entry_data;\r\n\r\n//update the iurl field\r\nif(themeSectionLabel == \"i\") {\r\n    //we need to pull out the relative url\r\n    var entryIUrl = getUrlBaseFromIconUrl(entryData.url);\r\n    var entryRUrl = getRelativeUrlfromIconUrl(entryData.url);\r\n    if(workingData.iurl === null) {\r\n        workingData.iurl = entryIUrl;\r\n    }\r\n    else {\r\n        if(workingData.iurl != entryIUrl) {\r\n            throw new Error(\"This implementation does not support different base urls for icons. Fix this.\");\r\n        }\r\n    }\r\n    \r\n    entryData = apogee.util.deepJsonCopy(entryData);\r\n    delete entryData.url;\r\n    entryData.rurl = entryRUrl;\r\n}\r\n\r\n//add the entry\r\nvar key = fileEntryType.Fields.entry_value;\r\nif(themeSection[key] !== undefined) {\r\n    throw new Error(\"Multiple entries with the given key: \" + key + \", section: \" + themeSectionLabel);\r\n}\r\n\r\nthemeSection[key] = entryData;\r\n","supplementalCode":"function getUrlBaseFromIconUrl(url) {\n    var index = url.lastIndexOf(\"/\");\n    return url.substr(0,index+1);\n}\n\nfunction getRelativeUrlfromIconUrl(url) {\n    var index = url.lastIndexOf(\"/\");\n    return url.substr(index+1);\n}","description":""}},"sectionMap":{"name":"sectionMap","type":"apogee.JsonTable","updateData":{"data":{"icon":"i","style":"s","labelStyle":"l","marker":"m"},"description":""}},"postProcessFile":{"name":"postProcessFile","type":"apogee.FunctionTable","updateData":{"argList":["outFile","workingData"],"functionBody":"if(workingData.iurl !== null) {\r\n    outFile.iurl = workingData.iurl;\r\n}","supplementalCode":"","description":""}}}},"strings":{"name":"strings","type":"apogee.Folder","children":{"processEntry":{"name":"processEntry","type":"apogee.FunctionTable","updateData":{"argList":["output","metaFile","recipeEntry","fileEntry","fileEntryType","workingData"],"functionBody":" \r\nvar outputSection = output.translations;\r\n\r\nvar lang = fileEntryType.Fields.section[0];\r\nvar key = fileEntryType.Fields.entry_value;\r\nvar displayString = fileEntry.Fields.entry_data.trans;\r\n\r\nvar entry = outputSection[key];\r\nif(entry === undefined) {\r\n    entry = {};\r\n    outputSection[key] = entry\r\n}\r\n\r\nentry[lang] = displayString;\r\n","supplementalCode":"","description":""}},"initialize":{"name":"initialize","type":"apogee.FunctionTable","updateData":{"argList":["output"],"functionBody":"output.translations = {};","supplementalCode":"","description":""}}}},"inputColors":{"name":"inputColors","type":"apogee.Folder","children":{"processEntry":{"name":"processEntry","type":"apogee.FunctionTable","updateData":{"argList":["output","metaFile","recipeEntry","fileEntry","fileEntryType","workingData"],"functionBody":"\nvar color = fileEntryType.Fields.entry_value;\nvar entryData = fileEntry.Fields.entry_data;\n\noutput[color] = entryData;","supplementalCode":"","description":""}}}}}},"fileType":{"name":"fileType","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"if((!taskResults.loadMetaFileRecords)||(taskResults.loadMetaFileRecords.state != \"SUCCESS\")) return null;\n\nreturn taskResults.loadMetaFileRecords.data.fileType;","supplementalCode":"","description":""}},"reconstructFile":{"name":"reconstructFile","type":"apogee.FunctionTable","updateData":{"argList":["fileType","createRecordStructure"],"functionBody":"var output = {};\n\nvar metaFileRecord = createRecordStructure.metaFile;\nvar metaFileEntryList = createRecordStructure.entryList;\n\nvar processor = reconstruct[fileType];\n\n//output.nm = metaFileRecord.Fields.name;\n//output.ft = \"thm5xxxxxx\";\n\n//initialize, and load working data if applicable\nvar workingData;\nif(processor.initialize) {\n    workingData = processor.initialize(output);    \n}\n\n//process each entry\nfor(var i = 0; i < metaFileEntryList.length; i++) {\n    //get an entry\n    var metaFileEntry = metaFileEntryList[i];\n    var recipeEntry = metaFileEntry.recipeEntry;\n    var fileEntry = metaFileEntry.fileEntry;\n    var fileEntryType = metaFileEntry.fileEntryType;\n    \n    processor.processEntry(output,metaFileRecord,recipeEntry,fileEntry,fileEntryType,workingData);\n}\n\n//post process, if applicable\nif(processor.postProcessFile) {\n    processor.postProcessFile(output,workingData);\n}\n\nreturn output;","supplementalCode":"","description":""}}}}}},"micemetarDataAccess":{"name":"micemetarDataAccess","type":"apogee.Folder","children":{"createRecord":{"name":"createRecord","type":"apogee.FunctionTable","updateData":{"argList":["recordInfo","fieldMap"],"functionBody":"var record = {};\n\nrecord.Id = getId();\nrecord.Type = recordInfo.name;\nrecord.Fields = fieldMap;\nrecord.read_perm = READ_PERM;\nrecord.edit_perm = EDIT_PERM;\n\nreturn record;","supplementalCode":"var READ_PERM = 2;\nvar EDIT_PERM = 15;\n\nvar nextId = -1;\n\nfunction getId() {\n    return nextId--;\n}","description":"This method creates a record given the field values and record info \nfrom the data set info. It creates and ID and uses standard permissions."}},"recordsToCreateInstructions":{"name":"recordsToCreateInstructions","type":"apogee.FunctionTable","updateData":{"argList":["recordList"],"functionBody":"var instructions = [];\n\nfor(var i = 0; i < recordList.length; i++) {\n    var createRecord = recordList[i];\n    var instruction = createCreateInstruction(createRecord);\n    instructions.push(instruction);\n}\n\nreturn instructions;","supplementalCode":"","description":"This creates a list of create instructions to go along with a list of records to be created.\n\nThere is the option to assign the ID or to leave it as undefined, in which case\nan automatically incremented ID will be assigned. (For consistency in the data\nset, either all records should be preassigned or all records should be \nautomatically assigned."}},"createCommitBody":{"name":"createCommitBody","type":"apogee.FunctionTable","updateData":{"argList":["instructionList","commitMessage"],"functionBody":"var commit = {};\nvar actions = [];\n\nif(commitMessage.length === 0) throw new Error(\"Commit message missing!\");\n\ncommit.Name = dataSetInfo.name;\ncommit.Message = commitMessage;\ncommit.Actions = actions;\n\n//single action with commits\nvar action = {};\naction.Title = \"bulk create commit\";\naction.Instr = instructionList;\nactions.push(action);\n\nreturn commit","supplementalCode":"","description":"This creates a body for a commit request, given a list of instructions and a commit message."}},"createRequestOptions":{"name":"createRequestOptions","type":"apogee.FunctionTable","updateData":{"argList":["bodyJson","sessionKey"],"functionBody":"var header = {};\nheader[\"Content-Type\"] = \"text/plain;charset=UTF-8\";\nheader.sessionKey = sessionKey;\nheader[\"proto-version\"] = \"4.0\";\nheader[\"db-version\"] = dataSetInfo.version;\n\nrequestInfo = {};\nrequestInfo.header = header;\nif(bodyJson) {\n    requestInfo.method = \"POST\";\n    requestInfo.body = JSON.stringify(bodyJson);\n}\n\nreturn requestInfo;\n","supplementalCode":"","description":"This creates the requestOptions, suitable for apogee.net.jsonRequest, to go with an type of request to the workingset (micemetarequest) server."}},"host":{"name":"host","type":"apogee.JsonTable","updateData":{"data":"http://localhost:8080/micemetarws","description":""}},"commitUrl":{"name":"commitUrl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = host + \"/commit\";\nreturn value;\n\n","supplementalCode":"","description":""}},"requestUrl":{"name":"requestUrl","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = host + \"/cannedsearch\";\nreturn value;\n\n","supplementalCode":"","description":""}},"dataSetInfo":{"name":"dataSetInfo","type":"apogee.JsonTable","updateData":{"data":{"records":{"file_entry_type":{"idField":"file_entry_type_id","name":"file_entry_type","foreignList":[{"remoteRecord":"file_entry","name":"file_entry_list","isUnique":false,"remoteField":"file_entry_type_id","restrictDelete":true,"orderField":"ordr"}],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"file_type_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileType"},{"defaultValue":null,"name":"section","nullOk":true,"fieldClass":"org.json.JSONArray"},{"defaultValue":null,"name":"entry_parent_id","nullOk":true,"fieldClass":"com.micello.micemetar.data.FileEntryType"},{"defaultValue":null,"name":"entry_type","nullOk":true,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"entry_value","nullOk":false,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"name","nullOk":false,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.FileEntryType"},"file_entry_relation":{"idField":"file_entry_rel_id","name":"file_entry_relation","foreignList":[],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"file_entry_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileEntry"},{"defaultValue":null,"name":"referenced_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileEntry"},{"defaultValue":null,"name":"relation_type","nullOk":false,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.FileEntryRelation"},"com_file_entry":{"idField":"com_file_entry_id","name":"com_file_entry","foreignList":[],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"com_file_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.ComFile"},{"defaultValue":null,"name":"meta_file_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.MetaFile"},{"defaultValue":null,"name":"file_group","nullOk":false,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.ComFileEntry"},"file_type":{"idField":"file_type_id","name":"file_type","foreignList":[{"remoteRecord":"file_entry_type","name":"file_entry_type_list","isUnique":false,"remoteField":"file_type_id","restrictDelete":true,"orderField":"ordr"}],"fields":[{"defaultValue":null,"name":"file_type_name","nullOk":true,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.FileType"},"file_entry":{"idField":"file_entry_id","name":"file_entry","foreignList":[{"remoteRecord":"file_entry_relation","name":"file_entry_ref_list","isUnique":false,"remoteField":"file_entry_id","restrictDelete":true,"orderField":"ordr"}],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"file_entry_type_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileEntryType"},{"defaultValue":null,"name":"entry_context","nullOk":false,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"option_name","nullOk":false,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"entry_data","nullOk":false,"fieldClass":"org.json.JSONObject"}],"recordClass":"com.micello.micemetar.data.FileEntry"},"recipe_entry":{"idField":"recipe_entry_id","name":"recipe_entry","foreignList":[],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"meta_file_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.MetaFile"},{"defaultValue":null,"name":"file_entry_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileEntry"},{"defaultValue":null,"name":"insertion_info","nullOk":true,"fieldClass":"org.json.JSONObject"}],"recordClass":"com.micello.micemetar.data.RecipeEntry"},"com_file":{"idField":"com_file_id","name":"com_file","foreignList":[{"remoteRecord":"com_file_entry","name":"com_file_entry_list","isUnique":false,"remoteField":"com_file_id","restrictDelete":true,"orderField":"ordr"}],"fields":[{"defaultValue":null,"name":"file_context","nullOk":false,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"name","nullOk":false,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.ComFile"},"meta_file":{"idField":"meta_file_id","name":"meta_file","foreignList":[{"remoteRecord":"recipe_entry","name":"recipe_entry_list","isUnique":false,"remoteField":"meta_file_id","restrictDelete":true,"orderField":"ordr"},{"remoteRecord":"meta_ref_entry","name":"base_file_list","isUnique":false,"remoteField":"meta_file_id","restrictDelete":true,"orderField":"ordr"}],"fields":[{"defaultValue":null,"name":"file_type_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.FileType"},{"defaultValue":null,"name":"file_context","nullOk":false,"fieldClass":"java.lang.String"},{"defaultValue":null,"name":"name","nullOk":false,"fieldClass":"java.lang.String"}],"recordClass":"com.micello.micemetar.data.MetaFile"},"meta_ref_entry":{"idField":"meta_ref_entry_id","name":"meta_ref_entry","foreignList":[],"fields":[{"defaultValue":0,"name":"ordr","nullOk":false,"fieldClass":"java.lang.Integer"},{"defaultValue":null,"name":"meta_file_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.MetaFile"},{"defaultValue":null,"name":"base_file_id","nullOk":false,"fieldClass":"com.micello.micemetar.data.MetaFile"}],"recordClass":"com.micello.micemetar.data.MetaRefEntry"}},"name":"Micemetar","version":"5.0"},"description":""}},"version":{"name":"version","type":"apogee.JsonTable","updateData":{"data":"1.6","description":""}},"createUpdateInstruction":{"name":"createUpdateInstruction","type":"apogee.FunctionTable","updateData":{"argList":["initialRecord","targetRecord"],"functionBody":"if(initialRecord.Id != targetRecord.Id) {\n    throw new Error(\"Record ID mismatch in create update instruction for target record: \" + getRecordErrString(targetRecord));\n}\n\nif(initialRecord.Type != targetRecord.Type) {\n    throw new Error(\"Inital and target record types do not match. Target record: \" + getRecordErrString(targetRecord));\n}\n\nvar recordsDifferent = false;\n\nvar recordInfo = getRecordInfo(initialRecord.Type);\n\nvar instruction = {};\ninstruction.Type = \"Update\";\ninstruction.Record = recordInfo.name;\ninstruction.Id = initialRecord.Id;\n\ninstruction.initialReadPerm = initialRecord.read_perm;\ninstruction.initialEditPerm = initialRecord.edit_perm;\n\nif(initialRecord.readPerm != targetRecord.readPerm) {\n    instruction.targetReadPerm = targetRecord.read_perm;\n    recordsDifferent = true;\n}\n\nif(initialRecord.editPerm != targetRecord.editPerm) {\n    instruction.targetEditPerm = targetRecord.edit_perm;\n    recordsDifferent = true;\n}\n\nvar initialData = {};\ninstruction.Initial = initialData;\nvar targetData = {};\ninstruction.Target = targetData;\n\nfor(var i = 0; i < recordInfo.fields.length; i++) {\n    var field = recordInfo.fields[i];\n    \n    var initialValue;\n    var targetValue;\n    \n    var initialValue = initialRecord.Fields[field.name];\n    var targetValue = targetRecord.Fields[field.name];\n    \n    //validate target values\n    if(targetValue === undefined) {\n        //use default\n        targetValue = field.defaultValue;\n    }\n    \n    if(targetValue === undefined) {\n        throw new Error(\"Unknown problem: undefined field value: \" + getFieldErrString(createRecordInfo,createRecord.Id,field));\n    }\n    \n    if(targetValue === null) {\n        if(!field.nullOk) {\n            throw new Error(\"Illegal null value: \" + getFieldErrString(createRecordInfo,createRecord.Id,field));\n        }\n    }\n    \n    if(!fieldsMatch(initialValue,targetValue,field)) {\n        initialData[field.name] = initialValue;\n        targetData[field.name] = targetValue;\n        recordsDifferent = true;\n    }\n}\n\nif(recordsDifferent) {\n    return instruction;\n}\nelse {\n    return null;\n}\n","supplementalCode":"function fieldsMatch(initialValue,targetValue,fieldInfo) {\n    if(fieldInfo.fieldClass === \"java.lang.String\") {\n        //compare strings with \"==\"\n        return (initialValue == targetValue);\n    }\n    else if(fieldInfo.fieldClass.startsWith(\"java.lang\")) {\n        //compare other basic values with \"===\"\n        return initialValue === targetValue;\n    }\n    else if(fieldInfo.fieldClass.startsWith(\"com.micello\")) {\n        return initialValue === targetValue;\n    }\n    else if(fieldInfo.fieldClass == \"org.json.JSONObject\") {\n        return compareJsonData(initialValue,targetValue);\n    }\n    else if(fieldInfo.fieldClass == \"org.json.JSONArray\") {\n        return compareJsonData(initialValue,targetValue);\n    }\n    else {\n        throw new Error(\"unrecognized field type: \" + fieldInfo.fieldClass);\n    }\n}\n\nfunction compareJsonData(a,b) {\n    var an = apogee.util.getNormalizedObjectCopy(a);\n    var bn = apogee.util.getNormalizedObjectCopy(b);\n    var aString = JSON.stringify(an);\n    var bString = JSON.stringify(bn);\n    return aString == bString;\n}\n    ","description":"This function creates an update instruction given an initial and target record. If the records are the same then NULL is returned. (No update is needed.)"}},"createCreateInstruction":{"name":"createCreateInstruction","type":"apogee.FunctionTable","updateData":{"argList":["createRecord"],"functionBody":"\nvar recordInfo = getRecordInfo(createRecord.Type);\n\nvar instruction = {};\ninstruction.Type = \"Create\";\ninstruction.Record = recordInfo.name;\ninstruction.Id = createRecord.Id;\n\ninstruction.targetReadPerm = createRecord.read_perm;\ninstruction.targetEditPerm = createRecord.edit_perm;\n\nvar targetData = {};\ninstruction.Target = targetData;\n\nfor(var i = 0; i < recordInfo.fields.length; i++) {\n    var field = recordInfo.fields[i];\n    var targetValue;\n    var targetValue = createRecord.Fields[field.name];\n    if(targetValue === undefined) {\n        //use default\n        targetValue = field.defaultValue;\n    }\n    \n    if(targetValue === undefined) {\n        throw new Error(\"Unknown problem: undefined field value: \" + getFieldErrString(createRecord,field));\n    }\n    \n    if(targetValue === null) {\n        if(!field.nullOk) {\n            throw new Error(\"Illegal null value: \" + getFieldErrString(createRecord,field));\n        }\n    }\n    \n    targetData[field.name] = targetValue;\n}\n\nreturn instruction;\n","supplementalCode":"","description":""}},"getFieldErrString":{"name":"getFieldErrString","type":"apogee.FunctionTable","updateData":{"argList":["record","fieldInfo"],"functionBody":"return getRecordErrString(record) + \" - \" + fieldInfo.name;","supplementalCode":"","description":""}},"getRecordErrString":{"name":"getRecordErrString","type":"apogee.FunctionTable","updateData":{"argList":["record"],"functionBody":"return record.Type + \" \" + record.Id;","supplementalCode":"","description":""}},"createDeleteInstruction":{"name":"createDeleteInstruction","type":"apogee.FunctionTable","updateData":{"argList":["deleteRecord"],"functionBody":"\nvar recordInfo = getRecordInfo(deleteRecord.Type);\n\nvar instruction = {};\ninstruction.Type = \"Delete\";\ninstruction.Record = recordInfo.name;\ninstruction.Id = deleteRecord.Id;\n\ninstruction.initialReadPerm = deleteRecord.read_perm;\ninstruction.initialEditPerm = deleteRecord.edit_perm;\n\nvar initialData = {};\ninstruction.Initial = initialData;\n\nfor(var i = 0; i < recordInfo.fields.length; i++) {\n    var field = recordInfo.fields[i];\n    var initialValue = deleteRecord.Fields[field.name];\n    \n    initialData[field.name] = initialValue;\n}\n\nreturn instruction;\n","supplementalCode":"","description":""}},"getRecordInfo":{"name":"getRecordInfo","type":"apogee.FunctionTable","updateData":{"argList":["recordType"],"functionBody":"var recordInfo = dataSetInfo.records[recordType];\n\nif(!recordInfo) {\n    throw new Error(\"Record type not found in getRecordInfo: \" + recordType);\n}\n\nreturn recordInfo;","supplementalCode":"","description":""}},"combinedEntriesToInstructionList":{"name":"combinedEntriesToInstructionList","type":"apogee.FunctionTable","updateData":{"argList":["combinedEntries"],"functionBody":"var output = [];\nfor(var key in combinedEntries) {\n    var entry = combinedEntries[key];\n    var instruction = getInstructionForCombinedEntry(entry);\n    if(instruction) {\n        output.push(instruction);\n    }\n}\n\nreturn output;","supplementalCode":"function getInstructionForCombinedEntry(combinedEntry) {\n    var newEntry = combinedEntry.newEntry;\n    var oldEntry = combinedEntry.oldEntry;\n    \n    if(newEntry) {\n        if(!oldEntry) {\n            console.log(\"Create: \" + newEntry.Id);\n            return createCreateInstruction(newEntry);\n        }\n        else {\n            //this will return null for matching records\n            console.log(\"Update(maybe): \" + newEntry.Id);\n            return createUpdateInstruction(oldEntry,newEntry);\n        }\n    }\n    else if(oldEntry) {\n        console.log(\"Delete: \" + oldEntry.Id);\n        return createDeleteInstruction(oldEntry);\n    }\n    \n    return null;\n}\n\nfunction entriesDifferent(entry1,entry2) {\n    var string1 = JSON.stringify(apogee.util.getNormalizedCopy(entry1));\n    var string2 = JSON.stringify(apogee.util.getNormalizedCopy(entry2));\n    return (string1 == string2);\n}","description":"This function takes a combined entry map of the format:\n\n{\n  \"some-identifier\":{\n    \"oldEntry\":{original record entry, if applicable},\n    \"newEntry\":{new record entry, if applicable}\n  },\n  ...\n}\n\nIt returns an instruction list.\n\n"}},"getCommitPromise":{"name":"getCommitPromise","type":"apogee.FunctionTable","updateData":{"argList":["instructionList","commitMessage","sessionKey"],"functionBody":"var commitBody = createCommitBody(instructionList,commitMessage);\nvar requestOptions = createRequestOptions(commitBody,sessionKey);\nvalue = apogee.net.jsonRequest(commitUrl,requestOptions);\nreturn value;","supplementalCode":"","description":""}},"getRequestPromise":{"name":"getRequestPromise","type":"apogee.FunctionTable","updateData":{"argList":["requestBody","sessionKey"],"functionBody":"var requestOptions = createRequestOptions(requestBody,sessionKey);\nvalue = apogee.net.jsonRequest(requestUrl,requestOptions);\nreturn value;","supplementalCode":"","description":""}}}}}}},"components":{"taskResults":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":34,"y":95}},"children":{"loadMetaFileRecords":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":421,"height":601},"posInfo":{"x":68,"y":37},"state":0,"viewType":"JSON"}},"login":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":743,"height":276},"posInfo":{"x":599,"y":199},"state":0,"viewType":"Text"}},"loadContext":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":335,"height":125},"posInfo":{"x":62,"y":110},"state":0,"viewType":"Text"}}}},"tasks":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":37,"y":37}},"children":{"login":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":79,"y":21}},"children":{"loginUrl":{"type":"apogeeapp.app.TextComponent","windowState":{"sizeInfo":{"width":463,"height":86},"posInfo":{"x":26,"y":27},"state":0,"viewType":"Text"}},"loginControl":{"type":"apogeeapp.app.CustomControlComponent","windowState":{"sizeInfo":{"width":404,"height":129},"posInfo":{"x":28,"y":148},"state":0,"viewType":"Output"},"resource":{"html":"","css":"","setData":"this.loginUrl = data;","constructorAddition":"\n\n//this uses the updated version of test authorization that takes and returns a JSON\nthis.onClick = function() {\n    \n    //on click\n    var bodyJson = {};\n    bodyJson.userName = resource.userInput.value;\n    bodyJson.password = resource.passwordInput.value;\n    \n    //cleaer password field\n    resource.passwordInput.value = \"\";\n    \n    var options = {};\n    options.body = JSON.stringify(bodyJson);\n    options.method = \"POST\";\n    \n    var requestPromise = apogee.net.jsonRequest(this.loginUrl,options);\n    \n    //set the response\n    mode.getMessenger().asynchDataUpdate(\"sessionResponse\",requestPromise);\n}","init":"\nvar label1 = document.createElement(\"label\");\nlabel1.for = \"userInput\";\nlabel1.innerHTML = \"User:\"\nelement.appendChild(label1);\n\nvar input1 = document.createElement(\"input\");\ninput1.id = \"userInput\";\nresource.userInput = input1;\nelement.appendChild(input1);\n\nelement.appendChild(document.createElement(\"br\"));\n\nvar label2 = document.createElement(\"label\");\nlabel2.for = \"passwordInput\";\nlabel2.innerHTML = \"Password:\"\nelement.appendChild(label2);\n\nvar input2 = document.createElement(\"input\");\ninput2.id = \"passwordInput\";\ninput2.type = \"password\";\nresource.passwordInput = input2;\nelement.appendChild(input2);\n\nelement.appendChild(document.createElement(\"br\"));\n\nvar button = document.createElement(\"button\");\nbutton.innerHTML = \"Login\";\nelement.appendChild(button);\n\nvar instance = this;\nbutton.onclick = function() {\n    instance.onClick();\n}\n\n\n"}},"sessionResponse":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":697,"height":121},"posInfo":{"x":26,"y":306},"state":0,"viewType":"Text"}},"taskResult":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":711,"height":146},"posInfo":{"x":21,"y":452},"state":0,"viewType":"Text"}}}},"loadMetaFileRecords":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":76,"y":136}},"children":{"fileTypeList":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":555,"height":325},"posInfo":{"x":296,"y":149},"state":-1,"viewType":"Text"}},"fileTypeEntryList":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":742,"height":473},"posInfo":{"x":552,"y":195},"state":-1,"viewType":"Formula"}},"recordStore":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":1284,"height":549},"posInfo":{"x":387,"y":573},"state":-1,"viewType":"Formula"}},"metaFileResponse":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":799,"height":449},"posInfo":{"x":551,"y":144},"state":-1,"viewType":"Formula"}},"metaFileList":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":560,"height":289},"posInfo":{"x":42,"y":171},"state":-1,"viewType":"Text"}},"getRecord":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":488,"height":179},"posInfo":{"x":390,"y":527},"state":-1,"viewType":"Code"}},"metaFileSelector":{"type":"apogeeapp.app.CustomControlComponent","windowState":{"sizeInfo":{"width":387,"height":152},"posInfo":{"x":37,"y":227},"state":0,"viewType":"Output"},"resource":{"html":"<select id=\"load_metaFileSelect\"></select>\n<br><br>\n<input type=\"button\" value=\"Submit\" id=\"load_submitButton\"></input>\n<input type=\"button\" value=\"Cancel\" id=\"load_cancelButton\"></input>","onLoad":"this.selectMetaFileElement = document.getElementById(\"load_metaFileSelect\");\nthis.submitButton = document.getElementById(\"load_submitButton\");\nthis.cancelButton = document.getElementById(\"load_cancelButton\");\n\nvar instance = this;\nthis.submitButton.onclick = function() {\n    instance.onSubmitClick();\n}\nthis.cancelButton.onclick = function() {\n    instance.onCancelClick();\n}\n\nthis.initialized = true;","setData":"if(!data) return;\nif(!this.initialized) return;\n\nvar INVALID_ID = 0;\n\napogeeapp.ui.removeAllChildren(this.selectMetaFileElement);\n\n//add a dummy entry\nvar option = document.createElement(\"option\");\noption.text = \"<none selected>\";\n\noption.value = INVALID_ID;\nif(INVALID_ID == data.currentMetaFileId) option.selected = true;\nthis.selectMetaFileElement.add(option);\n\nfor(var fileDesc in data.metaFiles) {\n    var id = data.metaFiles[fileDesc];\n    var option = document.createElement(\"option\");\n    option.text = fileDesc;\n    option.value = id;\n    if(id == data.currentMetaFileId) option.selected = true;\n    this.selectMetaFileElement.add(option);\n}\n","constructorAddition":"\nthis.onSubmitClick = function() {\n    \n    if(!this.selectMetaFileElement) {\n        alert(\"Error; UI not initialized\");\n        return;\n    }\n    \n    if(this.selectMetaFileElement.length === 0) {\n        alert(\"Invalid selection!\");\n        return;\n    }\n    \n    var selectedIdString = this.selectMetaFileElement.value;\n    if(!isFinite(selectedIdString)) {\n        alert(\"Invalid selection!\");\n        return;\n    }\n    \n    var metaFileId = Number(selectedIdString);\n    \n    //create the compound update\n    var updateInfo = [];\n    updateInfo.push([\"selectedMetaFileId\",metaFileId]);\n    updateInfo.push([\"storeDataFlag\",true]);\n    mode.getMessenger().compoundDataUpdate(updateInfo);\n}\n\nthis.onCancelClick = function() {\n    mode.getMessenger().dataUpdate(\"taskResults.loadContext\",\"\");\n}\n\n"}},"INVALID_ID":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":220,"height":70},"posInfo":{"x":29,"y":644},"state":0,"viewType":"Text"}},"availableFileEntries":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":470,"height":320},"posInfo":{"x":664,"y":28},"state":-1,"viewType":"Formula"}},"existingMetaFileEntry":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":646,"height":259},"posInfo":{"x":898,"y":148},"state":-1,"viewType":"Text"}},"existingRecipeEntries":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":592,"height":452},"posInfo":{"x":904,"y":206},"state":0,"viewType":"Formula"}},"storeDataFlag":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":233,"height":35},"posInfo":{"x":844,"y":455},"state":0,"viewType":"Text"}},"taskResult":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":944,"height":639},"posInfo":{"x":842,"y":537},"state":-1,"viewType":"Formula"}},"dataLoadSuccess":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":750,"height":448},"posInfo":{"x":550,"y":290},"state":-1,"viewType":"Text"}},"context":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":268,"height":55},"posInfo":{"x":309,"y":8},"state":0,"viewType":"Text"}},"sessionKey":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":259,"height":102},"posInfo":{"x":23,"y":14},"state":0,"viewType":"Text"}},"selectedMetaFileId":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":270,"height":102},"posInfo":{"x":18,"y":464},"state":0,"viewType":"Text"}},"fileType":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":358,"height":106},"posInfo":{"x":896,"y":246},"state":0,"viewType":"Text"}}}},"loadContext":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":82,"y":74}},"children":{"contextControl":{"type":"apogeeapp.app.CustomControlComponent","windowState":{"sizeInfo":{"width":394,"height":141},"posInfo":{"x":67,"y":55},"state":0,"viewType":"Output"},"resource":{"html":"Context: <input type=\"text\" id=\"context_text\"></input>\n<br><br>\n<input type=\"button\" id=\"context_submit\" value=\"Submit\"></input>\n<input type=\"button\" id=\"context_newlogin\" value=\"New Login\"></input>","onLoad":"this.textInput = document.getElementById(\"context_text\");\nthis.submitButton = document.getElementById(\"context_submit\");\nthis.newLoginButton = document.getElementById(\"context_newlogin\");\nthis.initialized = true;\n\nvar instance = this;\nthis.submitButton.onclick = function() {\n    instance.onSubmit();\n}\nthis.newLoginButton.onclick = function() {\n    instance.onNewLogin();\n}","constructorAddition":"this.textInput = null;\nthis.submitButton = null;\nthis.newLogingButton = null;\nthis.initialized = false;\n\nthis.onSubmit = function() {\n    if(!this.initialized) return;\n    \n    var context = this.textInput.value.trim();\n    if(context.length === 0) {\n        alert(\"Invalid context value.\");\n        return;\n    }\n    \n    var output = {};\n    output.state = \"SUCCESS\";\n    output.data = {}\n    output.data.context = context;\n    \n    var messenger = mode.getMessenger();\n    messenger.dataUpdate(\"taskResults.loadContext\",output);\n}\n\nthis.onNewLogin = function() {\n    mode.getMessenger().dataUpdate(\"taskResults.login\",\"\");\n}"}}}},"fileReconstruct":{"type":"apogeeapp.app.FolderComponent","children":{"createRecordStructure":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":1044,"height":508},"posInfo":{"x":59,"y":216},"state":-1,"viewType":"Formula"}},"newFile":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":597,"height":433},"posInfo":{"x":495,"y":128},"state":0,"viewType":"Text"}},"reconstruct":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":367,"y":19}},"children":{"presets":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":106,"y":97}},"children":{"processEntry":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":915,"height":475},"posInfo":{"x":26,"y":135},"state":0,"viewType":"Private"}},"postProcessFile":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":734,"height":400},"posInfo":{"x":563,"y":295},"state":0,"viewType":"Code"}},"initialize":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":385,"height":59},"posInfo":{"x":25,"y":25},"state":0,"viewType":"Code"}}}},"themeMap":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":93,"y":197}},"children":{"initialize":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":400,"height":400},"posInfo":{"x":25,"y":25},"state":0,"viewType":"Code"}},"processEntry":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":844,"height":675},"posInfo":{"x":133,"y":42},"state":0,"viewType":"Code"}},"postProcessFile":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":576,"height":400},"posInfo":{"x":687,"y":88},"state":0,"viewType":"Code"}}}},"theme":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":103,"y":150}},"children":{"initialize":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":400,"height":400},"posInfo":{"x":25,"y":25},"state":0,"viewType":"Code"}},"processEntry":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":834,"height":665},"posInfo":{"x":452,"y":74},"state":0,"viewType":"Code"}},"sectionMap":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":282,"height":137},"posInfo":{"x":1074,"y":25},"state":0,"viewType":"Text"}},"postProcessFile":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":580,"height":400},"posInfo":{"x":170,"y":281},"state":0,"viewType":"Code"}}}},"strings":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":92,"y":245}},"children":{"processEntry":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":614,"height":239},"posInfo":{"x":27,"y":42},"state":0,"viewType":"Code"}},"initialize":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":400,"height":76},"posInfo":{"x":34,"y":344},"state":0,"viewType":"Code"}}}},"inputColors":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":84,"y":303}},"children":{"processEntry":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":790,"height":716},"posInfo":{"x":50,"y":50},"state":0,"viewType":"Code"}}}}}},"fileType":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":367,"height":36},"posInfo":{"x":55,"y":118},"state":0,"viewType":"Text"}},"reconstructFile":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":805,"height":579},"posInfo":{"x":366,"y":62},"state":-1,"viewType":"Code"}}}}}},"micemetarDataAccess":{"type":"apogeeapp.app.FolderComponent","windowState":{"posInfo":{"x":216,"y":34}},"children":{"createRecord":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":560,"height":321},"posInfo":{"x":32,"y":389},"state":-1,"viewType":"Code"}},"recordsToCreateInstructions":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":834,"height":391},"posInfo":{"x":30,"y":472},"state":-1,"viewType":"Code"}},"createCommitBody":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":568,"height":400},"posInfo":{"x":629,"y":225},"state":-1,"viewType":"Code"}},"createRequestOptions":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":523,"height":254},"posInfo":{"x":822,"y":379},"state":-1,"viewType":"Code"}},"host":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":353,"height":71},"posInfo":{"x":16,"y":6},"state":-1,"viewType":"Text"}},"commitUrl":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":433,"height":107},"posInfo":{"x":14,"y":98},"state":-1,"viewType":"Text"}},"requestUrl":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":450,"height":68},"posInfo":{"x":14,"y":57},"state":-1,"viewType":"Formula"}},"dataSetInfo":{"type":"apogeeapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":882,"height":611},"posInfo":{"x":28,"y":622},"state":-1,"viewType":"Text"}},"version":{"type":"apogeeapp.app.TextComponent","windowState":{"sizeInfo":{"width":197,"height":91},"posInfo":{"x":523,"y":367},"state":0,"viewType":"Text"}},"createUpdateInstruction":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":886,"height":655},"posInfo":{"x":36,"y":248},"state":-1,"viewType":"Code"}},"createCreateInstruction":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":994,"height":643},"posInfo":{"x":35,"y":209},"state":-1,"viewType":"Code"}},"getFieldErrString":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":512,"height":68},"posInfo":{"x":761,"y":616},"state":-1,"viewType":"Code"}},"getRecordErrString":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":400,"height":81},"posInfo":{"x":762,"y":664},"state":-1,"viewType":"Code"}},"createDeleteInstruction":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":678,"height":540},"posInfo":{"x":36,"y":289},"state":-1,"viewType":"Code"}},"getRecordInfo":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":480,"height":400},"posInfo":{"x":818,"y":427},"state":-1,"viewType":"Code"}},"combinedEntriesToInstructionList":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":721,"height":524},"posInfo":{"x":31,"y":516},"state":-1,"viewType":"Private"}},"getCommitPromise":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":741,"height":400},"posInfo":{"x":374,"y":75},"state":-1,"viewType":"Code"}},"getRequestPromise":{"type":"apogeeapp.app.FunctionComponent","windowState":{"sizeInfo":{"width":810,"height":400},"posInfo":{"x":376,"y":28},"state":-1,"viewType":"Code"}}}}}}
