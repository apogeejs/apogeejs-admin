{"fileType":"apogee app js workspace","version":"0.60","references":{"refEntries":[{"url":"http://localhost:8888/dev/pagemaker/modules/PropertyComponentModule.js","nickname":"","entryType":"es module"},{"url":"http://localhost:8888/dev/pagemaker/modules/HandlerComponentModule.js","nickname":"","entryType":"es module"}],"viewState":{"treeState":1,"lists":{"es module":{"treeState":1},"js link":{"treeState":0},"css link":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"Test Workspace","children":{"Main":{"name":"Main","type":"apogee.Folder","children":{}},"PageElements":{"name":"PageElements","type":"apogee.Folder","children":{"htmlParent":{"name":"htmlParent","type":"apogee.Folder","children":{"innerHTML":{"name":"innerHTML","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return content;","supplementalCode":""}},"content":{"name":"content","type":"apogee.JsonTable","updateData":{"data":"<h1>Test Page</h1>\r\n<p>This is a test page. Blah blah blah</p>\r\nContent: <input type=\"text\" id=\"textField\"><br>\r\nBackground Color: <input type=\"text\" id=\"bgColor\"><br>\r\nBorder Color: <input type=\"text\" id=\"borderColor\"><br>\r\nBorder Width: <input type=\"text\" id=\"borderWidth\"><br>\r\n<br>\r\n<div id=\"output\"></div>"}}}},"textField":{"name":"textField","type":"apogee.Folder","children":{"onchange":{"name":"onchange","type":"apogee.FunctionTable","updateData":{"argList":["event"],"functionBody":"apogeeMessenger.dataUpdate(\"output.content\",event.target.value);","supplementalCode":""}}}},"output":{"name":"output","type":"apogee.Folder","children":{"style":{"name":"style","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return styleValue;","supplementalCode":""}},"innerHTML":{"name":"innerHTML","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return content;","supplementalCode":""}},"backgroundColor":{"name":"backgroundColor","type":"apogee.JsonTable","updateData":{"data":"lightblue"}},"borderColor":{"name":"borderColor","type":"apogee.JsonTable","updateData":{"data":"red"}},"borderWidth":{"name":"borderWidth","type":"apogee.JsonTable","updateData":{"data":"5"}},"styleValue":{"name":"styleValue","type":"apogee.JsonTable","updateData":{"argList":[],"functionBody":"return `background-color: ${backgroundColor}; border: ${borderWidth}px solid ${borderColor};`","supplementalCode":""}},"content":{"name":"content","type":"apogee.JsonTable","updateData":{"data":"This is the content"}}}},"bgColor":{"name":"bgColor","type":"apogee.Folder","children":{"onchange":{"name":"onchange","type":"apogee.FunctionTable","updateData":{"argList":["event"],"functionBody":"apogeeMessenger.dataUpdate(\"output.backgroundColor\",event.target.value);","supplementalCode":""}}}},"borderColor":{"name":"borderColor","type":"apogee.Folder","children":{"onchange":{"name":"onchange","type":"apogee.FunctionTable","updateData":{"argList":["event"],"functionBody":"apogeeMessenger.dataUpdate(\"output.borderColor\",event.target.value);","supplementalCode":""}}}},"borderWidth":{"name":"borderWidth","type":"apogee.Folder","children":{"onchange":{"name":"onchange","type":"apogee.FunctionTable","updateData":{"argList":["event"],"functionBody":"apogeeMessenger.dataUpdate(\"output.borderWidth\",event.target.value);","supplementalCode":""}}}}}}}},"components":{"Main":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Page Runner"}]},{"type":"paragraph","content":[{"type":"text","text":"This is a concept to control a general HTML page using Apogee."}]},{"type":"paragraph","content":[{"type":"text","text":"There is an HTML display (on the right -> ) and there are components in the apogee model that link to it to update properties and handle events."}]},{"type":"heading2","content":[{"type":"text","text":"Current Operation"}]},{"type":"paragraph","content":[{"type":"text","text":"Currently this is pretty cumbersome."}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"For each HTML element we want to interact with we create a folder, which by convention I have place in the \"Page Elements\" folder."}]},{"type":"listItem","content":[{"type":"text","text":"Inside the element folder I put some new components, PropertyComponent and HandlerComponent. I can also put other components."}]},{"type":"listItem","content":[{"type":"text","text":"The PropertyComponent and HandlerComponent get the element name from the parent folder name and the property/handler name from the component name itself. The property component will update the element property whenever its value changes. The handler component is a function that is set to listen to the element event."}]},{"type":"listItem","content":[{"type":"text","text":"One property component, for innerHTML, is created for the main html element itself, to set the content."}]}]},{"type":"paragraph","content":[{"type":"text","text":"Some issues with the implementation"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"I load the element once when the component is created. It does not account for changes in the component. In particular, if I change innerHTML for the main element, all the other components elements are no longer valid. So we would need to fix this problem."}]},{"type":"listItem","content":[{"type":"text","text":"I currently don't have a two way connection with properties. Ideally I would load the value from the element and allow it to be set. I would have to make sure this isn't too expensive."}]}]},{"type":"paragraph","content":[{"type":"text","text":"As is this is very cumbersome. A few reasons:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"I think each component will have very few (maybe 1) controlled property or event. So I create this folder and put a single element component in it."}]},{"type":"listItem","content":[{"type":"text","text":"For the property elements I found I was always just setting the value to the value of another table. So I had to create the element component and the other component (along with the folder) to control a property."}]}]},{"type":"paragraph","content":[{"type":"text","text":"It might work better to do the following:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"Element component - This will be a folder component, but it will be displayed as a child. I will have a form that lets you select which properties you want to control and events you want to listen to (from a giant form). It will expose just these properties/events in the form and for each one you will add an expression (or, optionally, a string value where appropriate. You would have to specify which, I think.)"}]}]},{"type":"heading2","content":[{"type":"text","text":"Deployment on a Web Page"}]},{"type":"paragraph","content":[{"type":"text","text":"I think my quick implementation was bad. I extended basic JSON and Function components and views and added to the view update handler. I am not sure this will let me deploy easiliy. I will have to work on that."}]},{"type":"paragraph","content":[{"type":"text","text":"Ideally, when I do deploy, I will have to option of including complete components in the web page or linking to the existing DOM elements with the new components."}]},{"type":"paragraph"},{"type":"paragraph"}]}},"viewState":{"childDisplayState":null,"tabOpened":true,"tabShowing":true}},"PageElements":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Page Elements"}]},{"type":"paragraph","content":[{"type":"text","text":"This is the parent folder for the page elements. Access the individual elements from the tree panel."}]}]}},"children":{"htmlParent":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Main DIV"}]},{"type":"paragraph","content":[{"type":"text","text":"This is the main page element."}]},{"type":"apogeeComponent","attrs":{"name":"innerHTML","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"content","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"innerHTML":{"type":"pagerunner.PropertyComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"content":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}},"textField":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Text Field"}]},{"type":"apogeeComponent","attrs":{"name":"onchange","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"fff"}]}]}},"children":{"onchange":{"type":"pagerunner.HandlerComponent","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}},"output":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Output Element"}]},{"type":"heading2","content":[{"type":"text","text":"Element Components"}]},{"type":"apogeeComponent","attrs":{"name":"style","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"innerHTML","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Element Value Cells"}]},{"type":"paragraph","content":[{"type":"text","text":"For now I am generating the content somewhere else and then putting it in the component. Surely I can find a better way of doing this."}]},{"type":"heading3","content":[{"type":"text","text":"Content"}]},{"type":"apogeeComponent","attrs":{"name":"content","id":0,"state":""}},{"type":"heading3","content":[{"type":"text","text":"Styles"}]},{"type":"apogeeComponent","attrs":{"name":"styleValue","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"backgroundColor","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"borderColor","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"borderWidth","id":0,"state":""}}]}},"children":{"style":{"type":"pagerunner.PropertyComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"innerHTML":{"type":"pagerunner.PropertyComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"height":7000,"isViewActive":false},"Private":{"isViewActive":false}}}}},"backgroundColor":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"borderColor":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"borderWidth":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"styleValue":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"content":{"type":"apogeeapp.app.JsonTableComponent","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}},"bgColor":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Background Color"}]},{"type":"apogeeComponent","attrs":{"name":"onchange","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"onchange":{"type":"pagerunner.HandlerComponent","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}},"borderColor":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Border Color"}]},{"type":"apogeeComponent","attrs":{"name":"onchange","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"onchange":{"type":"pagerunner.HandlerComponent","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}},"borderWidth":{"type":"apogeeapp.app.FolderComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Border Width"}]},{"type":"apogeeComponent","attrs":{"name":"onchange","id":0,"state":""}},{"type":"paragraph"}]}},"children":{"onchange":{"type":"pagerunner.HandlerComponent","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}