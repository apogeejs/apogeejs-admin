{"fileType":"hax workspace","jsLinks":["https://www.gstatic.com/charts/loader.js","../test/GoogleChartComponent.js"],"cssLinks":[],"workspace":{"fileType":"hax workspace","version":0.2,"data":{"name":"rentVersusOwn","type":"hax.Folder","children":{"MONTHS_PER_YEAR":{"name":"MONTHS_PER_YEAR","type":"hax.JsonTable","updateData":{"data":12,"description":""}},"settings":{"name":"settings","type":"hax.Folder","children":{"generalInfo":{"name":"generalInfo","type":"hax.Folder","children":{"inflationRate":{"name":"inflationRate","type":"hax.JsonTable","updateData":{"data":2,"description":""}},"numberYears":{"name":"numberYears","type":"hax.JsonTable","updateData":{"data":40,"description":""}},"numberMonths":{"name":"numberMonths","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = numberYears * MONTHS_PER_YEAR\nreturn value;\n\n","supplementalCode":"","description":""}}}},"loanInfo":{"name":"loanInfo","type":"hax.Folder","children":{"interestRate":{"name":"interestRate","type":"hax.JsonTable","updateData":{"data":4,"description":""}},"termYears":{"name":"termYears","type":"hax.JsonTable","updateData":{"data":30,"description":""}},"initialLoanAmount":{"name":"initialLoanAmount","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = settings.homeInfo.price - settings.homeInfo.downpayment;\nreturn value;\n\n","supplementalCode":"","description":""}},"mortgagePayment":{"name":"mortgagePayment","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = getMortgagePayment(initialLoanAmount,\n    interestRate,\n    termYears);\nreturn value;\n\n","supplementalCode":"","description":""}},"getMortgagePayment":{"name":"getMortgagePayment","type":"hax.FunctionTable","updateData":{"argList":["loanAmount","ratePercent","termYears"],"functionBody":"var monthlyInterestRate = ratePercent/MONTHS_PER_YEAR/100;\nvar numberMonths = termYears * MONTHS_PER_YEAR;\n\nvar compoundFactor = Math.pow(1 + monthlyInterestRate,numberMonths);\n\nvar payment = loanAmount * \n    (monthlyInterestRate*compoundFactor) / \n    (compoundFactor - 1);\n    \nreturn payment;","supplementalCode":"","description":""}}}},"homeInfo":{"name":"homeInfo","type":"hax.Folder","children":{"price":{"name":"price","type":"hax.JsonTable","updateData":{"data":500000,"description":""}},"percentDownpayment":{"name":"percentDownpayment","type":"hax.JsonTable","updateData":{"data":20,"description":""}},"downpayment":{"name":"downpayment","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = price * percentDownpayment/100;\nreturn value;\n\n","supplementalCode":"","description":""}},"initialMonthlyMaintanance":{"name":"initialMonthlyMaintanance","type":"hax.JsonTable","updateData":{"data":400,"description":""}},"propertyTaxRate":{"name":"propertyTaxRate","type":"hax.JsonTable","updateData":{"data":1,"description":""}},"appreciationRate":{"name":"appreciationRate","type":"hax.JsonTable","updateData":{"data":3,"description":""}},"taxValueAppreciationRate":{"name":"taxValueAppreciationRate","type":"hax.JsonTable","updateData":{"data":1,"description":""}},"maintenanceAppreciationRate":{"name":"maintenanceAppreciationRate","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = settings.generalInfo.inflationRate\nreturn value;\n\n","supplementalCode":"","description":""}}}},"ownerInfo":{"name":"ownerInfo","type":"hax.Folder","children":{"monthlyIncome":{"name":"monthlyIncome","type":"hax.JsonTable","updateData":{"data":5000,"description":""}},"marginalTaxRate":{"name":"marginalTaxRate","type":"hax.JsonTable","updateData":{"data":40,"description":""}},"incomeGrowthRate":{"name":"incomeGrowthRate","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = settings.generalInfo.inflationRate;\nreturn value;\n\n","supplementalCode":"","description":""}},"savingsGrowthRate":{"name":"savingsGrowthRate","type":"hax.JsonTable","updateData":{"data":5,"description":""}},"initialSavings":{"name":"initialSavings","type":"hax.JsonTable","updateData":{"data":200000,"description":""}}}},"rentInfo":{"name":"rentInfo","type":"hax.Folder","children":{"rent":{"name":"rent","type":"hax.JsonTable","updateData":{"data":1600,"description":""}},"rentGrowthRate":{"name":"rentGrowthRate","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = settings.generalInfo.inflationRate;\nreturn value;\n\n","supplementalCode":"","description":""}}}}}},"own":{"name":"own","type":"hax.Folder","children":{"marketValue":{"name":"marketValue","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = utils.growArray(settings.homeInfo.price,\n    settings.homeInfo.appreciationRate,\n    settings.generalInfo.numberMonths);\nreturn value;\n\n","supplementalCode":"","description":""}},"taxValue":{"name":"taxValue","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = utils.growArray(settings.homeInfo.price,\n    settings.homeInfo.taxValueAppreciationRate,\n    settings.generalInfo.numberMonths);\nreturn value;\n\n","supplementalCode":"","description":""}},"maintenanceArray":{"name":"maintenanceArray","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = utils.growArray(settings.homeInfo.initialMonthlyMaintanance,\n    settings.homeInfo.maintenanceAppreciationRate,\n    settings.generalInfo.numberMonths);\nreturn value;\n\n","supplementalCode":"","description":""}},"propertyTaxArray":{"name":"propertyTaxArray","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvar monthlyPropertyTaxRate = settings.homeInfo.propertyTaxRate / (MONTHS_PER_YEAR * 100);\nvalue = utils.arrayMultiply(taxValue,monthlyPropertyTaxRate);\nreturn value;\n\n","supplementalCode":"","description":""}},"taxCreditArray":{"name":"taxCreditArray","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvar marginalTaxFraction = settings.ownerInfo.marginalTaxRate / 100; \nvalue = utils.arrayMultiply(loanArrays.interestArray,marginalTaxFraction);\nreturn value;\n\n","supplementalCode":"","description":""}},"loanArrays":{"name":"loanArrays","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvar mortgageArray = [];\nvar interestArray = [];\nvar principalArray = [];\n\nvalue = {};\nvalue.mortgageArray = mortgageArray;\nvalue.interestArray = interestArray;\nvalue.principalArray = principalArray;\n\nprincipalArray[0] = settings.loanInfo.initialLoanAmount;\n//pay interest in arrears\ninterestArray[0] = 0;\n//no payment first month\nmortgageArray[0] = 0;\n\nvar prevPrincipal;\nvar interest;\nvar payment;\n\nfor(var i = 0; i < settings.generalInfo.numberMonths; i++) {\n    \n    prevPrincipal = principalArray[i]\n    if(prevPrincipal > 0) {\n        interest = prevPrincipal * (settings.loanInfo.interestRate / (MONTHS_PER_YEAR * 100));\n        if(prevPrincipal > settings.loanInfo.mortgagePayment) {\n            payment = settings.loanInfo.mortgagePayment;\n        }\n        else {\n            payment = prevPrincipal + interest;\n        }\n    }\n    else {\n        interest = 0;\n        payment = 0;\n    }\n    \n    principalArray[i+1] = prevPrincipal + interest - payment;\n    interestArray[i+1] = interest;\n    mortgageArray[i+1] = payment;\n}\nreturn value;\n\n","supplementalCode":"","description":""}},"totalExpenses":{"name":"totalExpenses","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = [];\n\nfor(var i = 0; i < loanArrays.mortgageArray.length; i++) {\n    value[i] = loanArrays.mortgageArray[i]\n        + maintenanceArray[i]\n        + propertyTaxArray[i]\n        - taxCreditArray[i];\n}\n\n//add the downpayment\nvalue[0] += settings.homeInfo.downpayment;\nreturn value;\n\n","supplementalCode":"","description":""}},"savings":{"name":"savings","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = calculateSavings(totalExpenses);\nreturn value;\n\n","supplementalCode":"","description":""}}}},"rent":{"name":"rent","type":"hax.Folder","children":{"rentArray":{"name":"rentArray","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = utils.growArray(settings.rentInfo.rent,\n    settings.rentInfo.rentGrowthRate,\n    settings.generalInfo.numberMonths);\nreturn value;\n\n","supplementalCode":"","description":""}},"savings":{"name":"savings","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = calculateSavings(rentArray);\nreturn value;\n\n","supplementalCode":"","description":""}}}},"utils":{"name":"utils","type":"hax.Folder","children":{"growArray":{"name":"growArray","type":"hax.FunctionTable","updateData":{"argList":["initialValue","anualPercentGrowth","numMonths"],"functionBody":"var array = [];\narray.push(initialValue);\nfor(var i = 1; i <= numMonths; i++) {\n    array[i] = array[i-1] * (1 + anualPercentGrowth / (12 * 100));\n    \n}\nreturn array;","supplementalCode":"","description":""}},"arrayMultiply":{"name":"arrayMultiply","type":"hax.FunctionTable","updateData":{"argList":["array","multiplier"],"functionBody":"return array.map(function(element) { return multiplier * element});","supplementalCode":"","description":""}}}},"calculateSavings":{"name":"calculateSavings","type":"hax.FolderFunction","argList":["expenses"],"returnValue":"savings","internalFolder":{"name":"calculateSavings","type":"hax.Folder","children":{"expenses":{"name":"expenses","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = [];\nfor(var i = 0; i < settings.generalInfo.numberMonths+1; i++) {\n    value[i] = 1000;\n}\nreturn value;\n\n","supplementalCode":"","description":""}},"income":{"name":"income","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = utils.growArray(settings.ownerInfo.monthlyIncome,\n    settings.ownerInfo.incomeGrowthRate,\n    settings.generalInfo.numberMonths);\nreturn value;\n\n","supplementalCode":"","description":""}},"savings":{"name":"savings","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = [];\nvalue[0] = settings.ownerInfo.initialSavings;\n\nvar balance;\nvar interest;\n\nfor(var i = 0; i < settings.generalInfo.numberMonths; i++) {\n    balance = value[i] + income[i] - expenses[i];\n    //interest paid in arrears\n    interest = balance * settings.ownerInfo.savingsGrowthRate / (MONTHS_PER_YEAR * 100);\n    value[i+1] = balance + interest;\n}\nreturn value;\n\n","supplementalCode":"","description":""}}}}},"homeless":{"name":"homeless","type":"hax.Folder","children":{"expenses":{"name":"expenses","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = zeroMonthsArray;\nreturn value;\n\n","supplementalCode":"","description":""}},"savings":{"name":"savings","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = calculateSavings(expenses);\nreturn value;\n\n","supplementalCode":"","description":""}}}},"savings":{"name":"savings","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var titles = [\"Own\",\"Rent\",\"Homeless\"];\n\nvar valueLists = [];\n\nvalueLists[0] = own.savings;\nvalueLists[1] = rent.savings;\nvalueLists[2] = homeless.savings;\n\nvar chartData = chartSettings.createChartData(valueLists,titles);\n\nvar data = {};\ndata.chartData = chartData;\ndata.chartOptions = chartSettings.savingsSettings;\n\nreturn data;","supplementalCode":"","description":""}},"chartSettings":{"name":"chartSettings","type":"hax.Folder","children":{"savingsSettings":{"name":"savingsSettings","type":"hax.JsonTable","updateData":{"data":{"hAxis":{"title":"Months"},"vAxis":{"title":"Dollars"},"backgroundColor":"#f9f9f9","title":"Savings","width":900,"height":500},"description":""}},"expensesSettings":{"name":"expensesSettings","type":"hax.JsonTable","updateData":{"data":{"hAxis":{"title":"Months"},"vAxis":{"title":"Dollars"},"backgroundColor":"#f9f9f9","title":"Expenses","width":900,"height":500},"description":""}},"debtSettings":{"name":"debtSettings","type":"hax.JsonTable","updateData":{"data":{"hAxis":{"title":"Months"},"vAxis":{"title":"Dollars"},"backgroundColor":"#f9f9f9","title":"Debt","width":900,"height":500},"description":""}},"homeValueSettings":{"name":"homeValueSettings","type":"hax.JsonTable","updateData":{"data":{"hAxis":{"title":"Months"},"vAxis":{"title":"Dollars"},"backgroundColor":"#f9f9f9","title":"HomeValue","width":900,"height":500},"description":""}},"createChartData":{"name":"createChartData","type":"hax.FunctionTable","updateData":{"argList":["valueLists","titles"],"functionBody":"var rows = [];\nvar columns = [];\n\n//set columns, including an initial column for the time entry\ncolumns.push(createColumn(\"number\",\"Month\"));\nfor(var ic = 0; ic < titles.length; ic++) {\n    columns.push(createColumn(\"number\",titles[ic]));\n}\n\n//set columns for each row, including a time entry\nfor(ic = 0; ic < valueLists.length; ic++) {\n    for(var ir = 0; ir < valueLists[ic].length; ir++) {\n        if(ic === 0) {\n            rows[ir] = [];\n            rows[ir].push(ir);\n        }\n        rows[ir].push(valueLists[ic][ir]);\n    }\n}\n\nvar data = {};\ndata.rows = rows;\ndata.columns = columns;\nreturn data;","supplementalCode":"function createColumn(type,name) {\n    var column = {};\n    column.type = type;\n    column.name = name;\n    return column;\n}","description":""}},"totalSettings":{"name":"totalSettings","type":"hax.JsonTable","updateData":{"data":{"hAxis":{"title":"Months"},"vAxis":{"title":"Dollars"},"backgroundColor":"#f9f9f9","title":"Total Assets","width":900,"height":500},"description":""}}}},"expenses":{"name":"expenses","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var titles = [\"Own\",\"Rent\",\"Homeless\"];\n\nvar valueLists = [];\n\nvalueLists[0] = own.totalExpenses;\nvalueLists[1] = rent.rentArray;\nvalueLists[2] = zeroMonthsArray;\n\nvar chartData = chartSettings.createChartData(valueLists,titles);\n\nvar data = {};\ndata.chartData = chartData;\ndata.chartOptions = chartSettings.expensesSettings;\n\nreturn data;","supplementalCode":"","description":""}},"homeValue":{"name":"homeValue","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var titles = [\"Own\",\"Rent\",\"Homeless\"];\n\nvar valueLists = [];\n\nvalueLists[0] = own.marketValue;\nvalueLists[1] = zeroMonthsArray;\nvalueLists[2] = zeroMonthsArray;\n\nvar chartData = chartSettings.createChartData(valueLists,titles);\n\nvar data = {};\ndata.chartData = chartData;\ndata.chartOptions = chartSettings.homeValueSettings;\n\nreturn data;","supplementalCode":"","description":""}},"Debt":{"name":"Debt","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var titles = [\"Own\",\"Rent\",\"Homeless\"];\n\nvar valueLists = [];\n\nvalueLists[0] = own.loanArrays.principalArray;\nvalueLists[1] = zeroMonthsArray;\nvalueLists[2] = zeroMonthsArray;\n\nvar chartData = chartSettings.createChartData(valueLists,titles);\n\nvar data = {};\ndata.chartData = chartData;\ndata.chartOptions = chartSettings.debtSettings;\n\nreturn data;","supplementalCode":"","description":""}},"zeroMonthsArray":{"name":"zeroMonthsArray","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var value;\nvalue = [0];\nfor(var i = 0; i < settings.generalInfo.numberMonths; i++) {\n    value.push(0);\n}\nreturn value;\n\n","supplementalCode":"","description":""}},"totalAssetValue":{"name":"totalAssetValue","type":"hax.JsonTable","updateData":{"argList":[],"functionBody":"var titles = [\"Own\",\"Rent\",\"Homeless\"];\n\nvar valueLists = [];\n\nvalueLists[0] = combineAssets(own.savings,own.marketValue,own.loanArrays.principalArray);\nvalueLists[1] = rent.savings;\nvalueLists[2] = homeless.savings;\n\nvar chartData = chartSettings.createChartData(valueLists,titles);\n\nvar data = {};\ndata.chartData = chartData;\ndata.chartOptions = chartSettings.totalSettings;\n\nreturn data;\n","supplementalCode":"function combineAssets(savings,homeValue,debt) {\n    var output = [];\n    for(var i = 0; i < savings.length; i++) {\n        output[i] = savings[i] + homeValue[i] - debt[i];\n    }\n    return output;\n}","description":""}}}}},"components":{"MONTHS_PER_YEAR":{"type":"haxapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":279,"height":112},"posInfo":{"x":611,"y":67},"state":0,"viewType":"Text"}},"settings":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":240,"y":110}},"children":{"generalInfo":{"type":"haxapp.app.FolderComponent","children":{"inflationRate":{"type":"haxapp.app.JsonTableComponent"},"numberYears":{"type":"haxapp.app.JsonTableComponent"},"numberMonths":{"type":"haxapp.app.JsonTableComponent"}}},"loanInfo":{"type":"haxapp.app.FolderComponent","children":{"interestRate":{"type":"haxapp.app.JsonTableComponent"},"termYears":{"type":"haxapp.app.JsonTableComponent"},"initialLoanAmount":{"type":"haxapp.app.JsonTableComponent"},"mortgagePayment":{"type":"haxapp.app.JsonTableComponent"},"getMortgagePayment":{"type":"haxapp.app.FunctionComponent","windowState":-1}}},"homeInfo":{"type":"haxapp.app.FolderComponent","children":{"price":{"type":"haxapp.app.JsonTableComponent"},"percentDownpayment":{"type":"haxapp.app.JsonTableComponent"},"downpayment":{"type":"haxapp.app.JsonTableComponent"},"initialMonthlyMaintanance":{"type":"haxapp.app.JsonTableComponent"},"propertyTaxRate":{"type":"haxapp.app.JsonTableComponent"},"appreciationRate":{"type":"haxapp.app.JsonTableComponent"},"taxValueAppreciationRate":{"type":"haxapp.app.JsonTableComponent"},"maintenanceAppreciationRate":{"type":"haxapp.app.JsonTableComponent"}}},"ownerInfo":{"type":"haxapp.app.FolderComponent","children":{"monthlyIncome":{"type":"haxapp.app.JsonTableComponent"},"marginalTaxRate":{"type":"haxapp.app.JsonTableComponent"},"incomeGrowthRate":{"type":"haxapp.app.JsonTableComponent"},"savingsGrowthRate":{"type":"haxapp.app.JsonTableComponent"},"initialSavings":{"type":"haxapp.app.JsonTableComponent"}}},"rentInfo":{"type":"haxapp.app.FolderComponent","children":{"rent":{"type":"haxapp.app.JsonTableComponent"},"rentGrowthRate":{"type":"haxapp.app.JsonTableComponent"}}}}},"own":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":67,"y":53}},"children":{"marketValue":{"type":"haxapp.app.JsonTableComponent"},"taxValue":{"type":"haxapp.app.JsonTableComponent"},"maintenanceArray":{"type":"haxapp.app.JsonTableComponent"},"propertyTaxArray":{"type":"haxapp.app.JsonTableComponent"},"taxCreditArray":{"type":"haxapp.app.JsonTableComponent"},"loanArrays":{"type":"haxapp.app.JsonTableComponent"},"totalExpenses":{"type":"haxapp.app.JsonTableComponent"},"savings":{"type":"haxapp.app.JsonTableComponent"}}},"rent":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":63,"y":122}},"children":{"rentArray":{"type":"haxapp.app.JsonTableComponent"},"savings":{"type":"haxapp.app.JsonTableComponent"}}},"utils":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":242,"y":49}},"children":{"growArray":{"type":"haxapp.app.FunctionComponent"},"arrayMultiply":{"type":"haxapp.app.FunctionComponent"}}},"calculateSavings":{"type":"haxapp.app.FolderFunctionComponent","windowState":{"posInfo":{"x":232,"y":225}},"children":{"expenses":{"type":"haxapp.app.JsonTableComponent"},"income":{"type":"haxapp.app.JsonTableComponent"},"savings":{"type":"haxapp.app.JsonTableComponent"}}},"homeless":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":64,"y":182}},"children":{"expenses":{"type":"haxapp.app.JsonTableComponent"},"savings":{"type":"haxapp.app.JsonTableComponent"}}},"savings":{"type":"haxapp.app.GoogleChartComponent","windowState":{"sizeInfo":{"width":665,"height":500},"posInfo":{"x":346,"y":179},"state":0,"viewType":"Output"}},"chartSettings":{"type":"haxapp.app.FolderComponent","windowState":{"posInfo":{"x":238,"y":158}},"children":{"savingsSettings":{"type":"haxapp.app.JsonTableComponent"},"expensesSettings":{"type":"haxapp.app.JsonTableComponent"},"debtSettings":{"type":"haxapp.app.JsonTableComponent"},"homeValueSettings":{"type":"haxapp.app.JsonTableComponent"},"createChartData":{"type":"haxapp.app.FunctionComponent"},"totalSettings":{"type":"haxapp.app.JsonTableComponent"}}},"expenses":{"type":"haxapp.app.GoogleChartComponent","windowState":{"sizeInfo":{"width":500,"height":500},"posInfo":{"x":399,"y":80},"state":0,"viewType":"Output"}},"homeValue":{"type":"haxapp.app.GoogleChartComponent","windowState":{"sizeInfo":{"width":500,"height":500},"posInfo":{"x":258,"y":302},"state":0,"viewType":"Output"}},"Debt":{"type":"haxapp.app.GoogleChartComponent","windowState":{"sizeInfo":{"width":500,"height":500},"posInfo":{"x":107,"y":331},"state":0,"viewType":"Output"}},"zeroMonthsArray":{"type":"haxapp.app.JsonTableComponent","windowState":{"sizeInfo":{"width":300,"height":300},"posInfo":{"x":368,"y":429},"state":0,"viewType":"Text"}},"totalAssetValue":{"type":"haxapp.app.GoogleChartComponent","windowState":{"sizeInfo":{"width":500,"height":500},"posInfo":{"x":277,"y":249},"state":0,"viewType":"Output"}}}}